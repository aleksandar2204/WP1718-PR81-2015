<!DOCTYPE html>
<html>
<head>
    <style>
        .dropdown-menu-right {
            right: 0;
            left: auto;
        }
    </style>



    
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="utf-8" />
    <title></title>
    <script src="Scripts/jquery-1.10.2.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            let korisnickoIme = localStorage.getItem("Ulogovan");
            if (korisnickoIme == "")
                $(location).attr('href', 'index.html');

            $('#zaprofil').hide();
            $('#zaizmenu').hide();
            $('#divDodajVoznju').hide();
            $('#divIzmeniVoznju').hide();
            $('#divOtkaziVoznju').hide();
            $('#map1').hide();
            $('#divKomentarisiVoznju').hide();
            $('#PretraziKorisnikdiv').hide();

            $('#zaprofilDispecer').hide();
            $('#zaizmenuDispecer').hide();

            $('#zadodajVozaca').hide();
            $('#zadodajVoznju').hide();

            $('#zaprofilVozaca').hide();
            $('#zaizmenuVozaca').hide();
            $('#promenaLokacijeVozaca').hide();

            function vratiStatusVoznje(id) {
                switch (id) {
                    case 0: return "Kreirana";
                    case 1: return "Formirana";
                    case 2: return "Obradjena";
                    case 3: return "Prihvaćena";
                    case 4: return "Otkazana";
                    case 5: return "Neuspešna";
                    case 6: return "Uspešna";
                }
            }

            let Korisnik = {
                KorisnickoIme: `${korisnickoIme}`
            };

            let korisnik;
            let uloga = '';
            $.ajax({
                type: 'POST',
                url: '/api/Wellcome',
                data: JSON.stringify(Korisnik),
                contentType: 'application/json; charset=utf-8',
                async: false,
                dataType: 'json',
                success: function (data) {
                    //alert('Sifra je: ' + data.Lozinka)
                    korisnik = data;
                    uloga = data.Uloga;
                }
            })

            let myVar = setInterval(
                function proveriStanje() {
                    if (uloga == 2) {//korisnik
                        $.ajax({
                            type: 'GET', url: '/api/Korisnik/' + korisnik.Id, async: false, success: function (data) {
                                for (korisnici in data) {
                                    if (data[korisnici].Banovan == 0 && data[korisnici].Id == korisnik.Id)
                                        $(location).attr('href', 'index.html');
                                }
                            }
                        })
                    } else if (uloga == 0) {//vozac
                        $.ajax({
                            type: 'GET', url: '/api/Vozac/' + korisnik.Id, async: false, success: function (data) {
                                for (vozac in data) {
                                    if (data[vozac].Banovan == 0 && data[vozac].Id == korisnik.Id)
                                        $(location).attr('href', 'index.html');
                                }
                            }
                        })
                    }
                    /*else if (u == 0) {
                        $(location).attr('href', 'index.html');
                    }*/
                }, 1000);

            if (korisnik.Uloga == 2) {
                $('#dispecer').hide();
                $('#vozac').hide();
                $('#musterija').show();
                $.get("/api/Voznja", function (data, status) {
                    let table = "<table border=\"1\">";
                    table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>";

                    for (voznja in data) {
                        if (data[voznja].Musterija == localStorage.getItem("Ulogovan")) {
                            table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                            switch (data[voznja].Automobil) {
                                case 0:
                                    table += "Putnicki automobil";
                                    break;
                                case 1:
                                    table += "Kombi vozilo";
                                    break;
                            }
                            table += "</td>";

                            if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                table += ("<td>/</td>");
                            }
                            else {
                                table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                            }

                            if (data[voznja].Iznos != "0") {
                                table += ("<td>" + data[voznja].Iznos + "</td>");
                            }
                            else {
                                table += ("<td>/</td>");
                            }

                            table += ('<td><textarea rows="5" cols="30" disabled>');

                            if (data[voznja].Komentar.Opis == "") {
                                table += ("Komentar nije dodat!" + "</textarea></td>");
                            } else {
                                table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                            }

                            if (data[voznja].Status == 0) {
                                table += '<td>Kreirana</td>';
                            } else if (data[voznja].Status == 1) {
                                table += '<td>Formirana</td>';
                            } else if (data[voznja].Status == 2) {
                                table += '<td>Obradjena</td>';
                            } else if (data[voznja].Status == 3) {
                                table += '<td>Prihvacena</td>';
                            } else if (data[voznja].Status == 4) {
                                table += '<td>Otkazana</td>';
                            } else if (data[voznja].Status == 5) {
                                table += '<td>Neuspjesna</td>';
                            } else if (data[voznja].Status == 6) {
                                table += '<td>Uspjesna</td>';
                            }
                            table += "<td>";
                            if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                            } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                            } else {
                                table += ("Nedostupne");
                            }
                            table += "</td></tr>";
                        }
                    }
                    table += "</table>";

                    $('#PrikazKorisnik').html(table);
                });
            } else if (korisnik.Uloga == 1) {
                $('#musterija').hide();
                $('#dispecer').show();
                $('#vozac').hide();
                $.get("/api/Voznja", function (data, status) {
                    let table = "<table border=\"1\">";
                    table += '<table border=1><tr><th>Id vožnje</th><th>Datum</th><th>Mušterija</th><th>Vozač</th><th >Mesto polaska</th><th>Tip auta</th><th>Ordedište</th><th>Iznos</th><th>Komentar</th><th>Status vožnje</th></tr>';


                    for (voznja in data) {
                        if (data[voznja].Dispecer == localStorage.getItem("Ulogovan")) {
                            table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                            if (data[voznja].Musterija == "") {
                                table += '<td>/</td>';
                            } else {
                                table += ('<td>' + data[voznja].Musterija + '</td>');
                            }

                            if (data[voznja].Vozac == "") {
                                table += '<td>/</td>';
                            } else {
                                table += ('<td>' + data[voznja].Vozac + '</td>');
                            }

                            table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                            switch (data[voznja].Automobil) {
                                case 0:
                                    table += "Putnički";
                                    break;
                                case 1:
                                    table += "Kombi";
                                    break;
                            }


                            if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                table += ("</td><td>/" + "</td>");
                            }
                            else {
                                table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                            }

                            if (data[voznja].Iznos != "0") {
                                table += ("<td>" + data[voznja].Iznos + "</td>");
                            } else {
                                table += ("<td>/</td>");
                            }

                            table += ('<td><textarea rows="5" cols="30" disabled>');

                            if (data[voznja].Komentar.Opis == "") {
                                table += ("Komentar nije dodat!" + "</textarea ></td >");
                            } else {
                                table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                            }

                            table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td> <td>");


                            /*if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                table += (`<button value=${data[voznja].IdVoznje} id="obradi">Obradi</button><br /><br />`);
                            } else {
                                table += ("Nedostupne");
                            }*/
                            table += (`</td></tr>`)

                        }
                    }
                    table += '</table>';

                    $('#PrikazDispecer').append(table);
                });
            }
            else if (korisnik.Uloga == 0) {
                $('#musterija').hide();
                $('#dispecer').hide();
                $('#vozac').show();
                $.get("/api/Voznja", function (data, status) {
                    let tableOfProducts = "<table border='1'>";
                    tableOfProducts += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                    for (voznja in data) {
                        if (localStorage.getItem("Ulogovan") == data[voznja].Vozac) {
                            tableOfProducts += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                            if (data[voznja].Status == 0) {
                                tableOfProducts += '<td>Kreirana</td>';
                            } else if (data[voznja].Status == 1) {
                                tableOfProducts += '<td>Formirana</td>';
                            } else if (data[voznja].Status == 2) {
                                tableOfProducts += '<td>Obradjena</td>';
                            } else if (data[voznja].Status == 3) {
                                tableOfProducts += '<td>Prihvacena</td>';
                            } else if (data[voznja].Status == 4) {
                                tableOfProducts += '<td>Otkazana</td>';
                            } else if (data[voznja].Status == 5) {
                                tableOfProducts += '<td>Neuspjesna</td>';
                            } else if (data[voznja].Status == 6) {
                                tableOfProducts += '<td>Uspjesna</td>';
                            }
                            if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2 || data[voznja].Status == 3) {
                                tableOfProducts += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                            } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                tableOfProducts += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                            } else {
                            }// <td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>
                        }
                    }
                    tableOfProducts += "</table>";
                    $("#PrikaziVoznjeVozac").html(tableOfProducts);

                });
            } else {
                $(location).attr('href', 'index.html');
            }

            //Dodavanje komentara na uspjesnu voznju iz musterije
            let idZaUspjesno;
            $(document).on('click', '#UspesanKomentar', function () {
                idZaUspjesno = $(this).val();
                $('#PrikazKorisnik').hide();
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#map1').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').show();
            })

            $('#KomentarisiKorisnik').click(function () {
                let id = `${$('#UspesanKomentar').val()}`;
                let komentar = {
                    Opis: `${$('#OpisKorisnikKomentar').val()}`,
                    OcenaVoznje: `${$('#OcenaVoznjeKorisnikKomentar').val()}`,
                    KorisnickoIme: localStorage.getItem("Ulogovan")
                };

                let KomentarisiVoznju = {
                    Komentar: komentar,
                    Musterija: localStorage.getItem("Ulogovan"),
                };

                $.ajax({
                    type: 'PUT',
                    url: '/api/Voznja/PutUspesnaKomentar/' + idZaUspjesno,
                    data: JSON.stringify(KomentarisiVoznju),
                    contentType: 'application/json;charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (!data) {
                            alert("Vožnja nije komentarisana!");
                        } else {
                            alert("Uspešno ste komentarisali vožnju!");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            })

            // Odustani od voznje iz korisnika


            $(document).on('click', '#odustani', function () {
                $('#PrikazKorisnik').hide();
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#map1').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divKomentarisiVoznju').hide();
                $('#divOtkaziVoznju').toggle(500);
            });

            $('#OtkaziKorisnik').click(function () {
                let id = `${$('#odustani').val()}`;
                let x = `${$('#OpisKorisnik').val()}`;
                if (x == "") {
                    alert("Popunite sva polja");
                } else {
                    let komentar = {
                        Opis: `${$('#OpisKorisnik').val()}`,
                        OcenaVoznje: `${$('#OcenaVoznjeKorisnik').val()}`
                    };

                    let OtkaziVoznju = {
                        Komentar: komentar,
                        Musterija: localStorage.getItem("Ulogovan")
                    };

                    $.ajax({
                        type: 'PUT',
                        url: '/api/Voznja/PutOtkaz/' + id,
                        data: JSON.stringify(OtkaziVoznju),
                        contentType: 'application/json;charset=utf-8',
                        dataType: 'json',
                        success: function (data) {
                            if (!data) {
                                alert("Vožnja nije otkazana!");
                            } else {
                                alert("Uspešno ste otkazali vožnju!");
                                $(location).attr('href', 'wellcome.html');
                            }
                        }
                    })
                }
            })

            $(document).on('click', '#izmeniV', function () {
                $('#PrikazKorisnik').hide();
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#map1').show();
                $('#divDodajVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').hide();
                $('#divIzmeniVoznju').toggle(500);
            });

            $('#IzmeniVoznju').click(function () {
                let niz = fulAdresa.split(",");

                let id = `${$('#izmeniV').val()}`;
                let tip = `${$('#TipVozilaIzmena').val()}`;
                if (tip == "KOMBI VOZILO") {
                    tip = "KOMBIVOZILA";
                }

                let adresa = {
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`
                };

                let lokacija = {
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresa
                };

                let NovaVoznjaKorisnika = {
                    Lokacija: lokacija,
                    Automobil: tip,
                }

                $.ajax({
                    type: 'PUT',
                    url: '/api/Voznja/Put/' + id,
                    data: JSON.stringify(NovaVoznjaKorisnika),
                    contentType: 'application/json;charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (!data) {
                            alert("Vožnja nije izmenjena!");
                        } else {
                            alert("Uspešno ste izmenili vožnju!");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            })

            // Kraj odustani od voznje iz korisnika

            $('#profilDispecer').click(function () {
                $('#zaizmenuDispecer').hide();

                $('#PrikazDispecerSve').hide();
                $('#zadodajVoznju').hide();
                $('#block').hide();
                $('#map1').hide();
                $('#PrikazDispecer').hide();

                $('#zadodajVozaca').hide();
                $('#1D').text(korisnik.KorisnickoIme);
                $('#2D').text(korisnik.Lozinka);
                $('#3D').text(korisnik.Ime);
                $('#4D').text(korisnik.Prezime);
                $('#5D').text(korisnik.JMBG);
                if (korisnik.Pol == 1) {
                    $('#6D').text("Zenski");
                } else {
                    $('#6D').text("Muski");
                }
                $('#7D').text(korisnik.Telefon);
                $('#8D').text(korisnik.Email);
                $('#zaprofilDispecer').toggle(500);
            })

            $('#izmeniDispecer').click(function () {
                $('#zaprofilDispecer').hide();
                $('#block').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#PrikazDispecer').hide();

                $('#zadodajVozaca').hide();
                $('#zaizmenuDispecer').toggle(500);
            })

            $('#IzmeniDispecer').click(function () {
                let dispecerIzmena = {
                    Id: korisnik.Id,
                    KorisnickoIme: `${$('#KorisnickoImeD').val()}`,
                    Lozinka: `${$('#LozinkaD').val()}`,
                    Ime: `${$('#ImeD').val()}`,
                    Prezime: `${$('#PrezimeD').val()}`,
                    Pol: korisnik.Pol,
                    JMBG: `${$('#JMBGD').val()}`,
                    Telefon: `${$('#TelefonD').val()}`,
                    Email: `${$('#EmailD').val()}`,
                    Uloga: 'DISPECER',
                    Voznja: "nema voznje",
                };


                $.ajax({
                    type: 'PUT',
                    url: '/api/Dispecer/' + korisnik.Id,
                    data: JSON.stringify(dispecerIzmena),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            localStorage.setItem("Ulogovan", dispecerIzmena.KorisnickoIme);
                            alert('Data was succesfully captured');
                            $(location).attr('href', 'wellcome.html');
                        }
                        else {
                            alert('Error');
                        }
                    }
                })
            })

            $('#odjaviDispecer').click(function () {
                localStorage.setItem("Ulogovan", null);
                $(location).attr('href', 'index.html');
            })

            $('#profil').click(function () {
                $('#zaizmenu').hide();
                $('#map1').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').hide();
                $('#PrikazKorisnik').hide();
                $('#PretraziKorisnikdiv').hide();

                $('#1').text(korisnik.KorisnickoIme);
                $('#2').text(korisnik.Lozinka);
                $('#3').text(korisnik.Ime);
                $('#4').text(korisnik.Prezime);
                $('#5').text(korisnik.JMBG);
                if (korisnik.Pol == 1) {
                    $('#6').text("Zenski");
                } else {
                    $('#6').text("Muski");
                }
                $('#7').text(korisnik.Telefon);
                $('#8').text(korisnik.Email);
                $('#zaprofil').toggle(500);
            })

            $('#izmeni').click(function () {
                $('#zaprofil').hide();
                $('#divKomentarisiVoznju').hide();
                $('#PrikazKorisnik').hide();
                $('#divIzmeniVoznju').hide();
                $('divDodajVoznju').hide();
                $('divOtkaziVoznju').hide();
                $('#map1').hide();
                $('#PretraziKorisnikdiv').hide();
                $('#zaizmenu').toggle(500);

                let table = "<h2>Izmena mušterije</h2><br/><br/><table border='1'>";
                table += "<tr><th>Korisnicko ime:</th><td><input type=\"text\" name=\"KorisnickoIme\" value=\"" + korisnik.KorisnickoIme + "\" id=\"KorisnickoIme\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><th>Lozinka:</th><td><input type=\"text\" value=\"" + korisnik.Lozinka + "\" name=\"Lozinka\" id=\"Lozinka\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><th>Ime:</th><td><input type=\"text\" name=\"Ime\" value=\"" + korisnik.Ime + "\" id=\"Ime\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><th>Prezime:</th><td><input type=\"text\" name=\"Prezime\" value=\"" + korisnik.Prezime + "\" id=\"Prezime\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><th>JMBG:</th><td><input type=\"text\" name=\"JMBG\" value=\"" + korisnik.JMBG + "\" id=\"JMBG\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><th>Kontakt Telefon:</th><td><input type=\"text\" value=\"" + korisnik.Telefon + "\" name=\"Telefon\" id=\"Telefon\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><th>Email:</th><td><input type=\"email\" name=\"Email\" value=\"" + korisnik.Email + "\" id=\"Email\" style=\"margin: 5px\" /></td></tr>";
                table += "<tr><td colspan=\"2\"><hr /></td></tr><tr><td colspan=\"2\" align=\"right\"><b><input type=\"button\" value=\"Izmeni\" id=\"Izmeni\" /></b></td></tr "
                table += "</table>"
                $('#zaizmenu').html(table);
            })

            $(document).on('click', '#Izmeni', function () {
                let korisnikIzmena = {
                    Id: korisnik.Id,
                    KorisnickoIme: `${$('#KorisnickoIme').val()}`,
                    Lozinka: `${$('#Lozinka').val()}`,
                    Ime: `${$('#Ime').val()}`,
                    Prezime: `${$('#Prezime').val()}`,
                    Pol: korisnik.Pol,
                    JMBG: `${$('#JMBG').val()}`,
                    Telefon: `${$('#Telefon').val()}`,
                    Email: `${$('#Email').val()}`,
                    Uloga: 'MUSTERIJA',
                    Voznja: "nema voznje",
                };


                $.ajax({
                    type: 'PUT',
                    url: '/api/Korisnik/' + korisnik.Id,
                    data: JSON.stringify(korisnikIzmena),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            localStorage.setItem("Ulogovan", korisnikIzmena.KorisnickoIme);
                            alert('Data was succesfully captured');
                            $(location).attr('href', 'wellcome.html');
                        }
                        else {
                            alert('Error');
                        }
                    }
                })
            })

            $('#odjavi').click(function () {
                localStorage.setItem("Ulogovan", null);
                $(location).attr('href', 'index.html');
            })

            // Prikaz svih voznji iz dispecera

            $('#DispecerSveVoznje').click(function () {
                $('#PrikazDispecer').hide();
                $('#PretraziDispecerSvediv').hide();
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#PretraziDispecerdiv').hide();
                $('#block').hide();

                $('#PrikazDispecerSve').show();
                $.get("/api/Voznja", function (data, status) {
                    let tableOfProducts = "<table border='1'>";
                    tableOfProducts += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                    for (voznja in data) {
                        if (data[voznja].Automobil == 0) {
                            tableOfProducts += '<tr><td>Putnički</td>';
                        }
                        else {
                            tableOfProducts += '<tr><td>Kombi</td>';
                        }
                        tableOfProducts += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                        if (data[voznja].Status == 0) {
                            tableOfProducts += '<td>Kreirana</td>';
                        } else if (data[voznja].Status == 1) {
                            tableOfProducts += '<td>Formirana</td>';
                        } else if (data[voznja].Status == 2) {
                            tableOfProducts += '<td>Obradjena</td>';
                        } else if (data[voznja].Status == 3) {
                            tableOfProducts += '<td>Prihvacena</td>';
                        } else if (data[voznja].Status == 4) {
                            tableOfProducts += '<td>Otkazana</td>';
                        } else if (data[voznja].Status == 5) {
                            tableOfProducts += '<td>Neuspjesna</td>';
                        } else if (data[voznja].Status == 6) {
                            tableOfProducts += '<td>Uspjesna</td>';
                        }
                        tableOfProducts += `<td>${data[voznja].Iznos}</td>`;

                        if (data[voznja].Komentar.DatumObjave != null) {

                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                tableOfProducts += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                            } else {
                                tableOfProducts += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                            }
                        } else {
                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                tableOfProducts += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td></td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                            } else {
                                tableOfProducts += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                            }
                        }

                    }
                    tableOfProducts += "</table>";

                    $("#PrikazDispecerSve").html(tableOfProducts);
                });

            });

            //Kraj

            // DODAVANJE 5 NAJBLIZIH

            $(document).on('click', '#dispecerDodajVozaca', function () {  // za dispecera

                let fired_button2 = $(this).val();
                let dolaznaAdresa
                localStorage.setItem("dodajVozaca", fired_button2);
                let type;
                $.get("/api/Voznja", function (data, status) {
                    for (voznja in data) {
                        if (data[voznja].IdVoznje == fired_button2) {
                            type = data[voznja].Automobil;
                            dolaznaAdresa = data[voznja].Lokacija;
                        }
                    }
                });
                
                $.get("/api/Vozac", function (data, status) {
                    let pom = type;
                    let koliko = 0;
                    let table = "<table border='1'><tr><td><select id=\"vozac1\" name=\"VozacVoznja\"> ";

                    let petNajblizih = [];

                    for (driver in data) {

                        let rastojanje;
                        rastojanje = Math.sqrt(Math.pow(dolaznaAdresa.X - data[driver].Lokacija.X, 2) + Math.pow(dolaznaAdresa.Y - data[driver].Lokacija.Y, 2));
                        let vozac1 = {
                            Id: data[driver].Id,
                            Rastojanje: rastojanje,
                        }
                        petNajblizih.push(vozac1);

                    }

                    petNajblizih.sort(function (a, b) {
                        return a.Rastojanje - b.Rastojanje;
                    })
                    let petOnly = [];
                    for (var pet in petNajblizih) {
                        for (var vozac in data) {
                            if (data[vozac].Id == petNajblizih[pet].Id) {
                                petOnly.push(data[vozac]);
                            }
                        }
                    }

                    data = petOnly;

                    for (driver in data) {
                        if (data[driver].Automobil.Tip == pom && data[driver].Zauzet == false) {
                            table += "<option>" + data[driver].KorisnickoIme + "</option>";
                            koliko++;
                            if (koliko == 4) break;
                        }
                    }

                    table += "</select></td></tr></table><button id=\"dispecerDodajVozaca2\" type=\"button\"><b>Dodaj voznju</b></button>";

                    if (koliko == 0) {
                        alert('Trenutno nema slobodnih vozača sa traženim automobilom.');
                        $(location).attr('href', 'wellcome.html');
                    } else {
                        $("#PrikazDispecerSve").append(table);
                        $('#PretraziDispecerSvediv').append(table);
                    }

                });
            });

            $(document).on('click', '#dispecerDodajVozaca2', function () {
                let id3 = localStorage.getItem("dodajVozaca");
                //$("#PrikaziVoznjeDispecerSve").hide();
                //$("#PrikaziVoznjeDispecer").hide();
                //$("#DodavanjeVoznjeMusterija").hide();
                //$("#IzmjenaKorisnik1").hide();
                //$("#PrikazKorisnik1").hide();
                //$("#DodajVozacaDispecer").hide();

                let voznja = {
                    Vozac: `${$('#vozac1').val()}`,
                    Iznos: 0,
                    Dispecer: localStorage.getItem("Ulogovan"),
                    Status: "OBRADJENA",
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Voznja/PutVozac/' + id3,
                    data: JSON.stringify(voznja),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert('Uspjesno dodat vozac');
                            localStorage.setItem("dodajVozaca", id3);
                            $(location).attr('href', 'wellcome.html');
                        } else {
                            alert('Ne postoji vozac sa zeljenim tipom automobila');
                        }
                    },
                })
            });

            // Kraj prikaza svih voznji iz dispecera

            $('#DodajVozaca').click(function () {
                let niz = fulAdresa.split(",");

                let adresa = {
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`
                };

                let lokacija = {
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresa
                };


                let automobil = {
                    Vozac: `${$('#KorisnickoImeVozaca').val()}`,
                    GodisteAutomobila: `${$('#GodisteAutomobila').val()}`,
                    BrojRegistarskeOznake: `${$('#BrojRegistarskeOznake').val()}`,
                    BrojTaksiVozila: `${$('#BrojTaksiVozila').val()}`,
                    Tip: `${$('#tip').val()}`,
                };

                let vozac = {
                    KorisnickoIme: `${$('#KorisnickoImeVozaca').val()}`,
                    Lozinka: `${$('#LozinkaVozaca').val()}`,
                    Ime: `${$('#ImeVozaca').val()}`,
                    Prezime: `${$('#PrezimeVozaca').val()}`,
                    Pol: `${$('#PolVozaca').val()}`,
                    JMBG: `${$('#JMBGVozaca').val()}`,
                    Telefon: `${$('#TelefonVozaca').val()}`,
                    Email: `${$('#EmailVozaca').val()}`,
                    Uloga: 'VOZAC',
                    Voznja: "nema voznje",
                    Lokacija: lokacija,
                    Automobil: automobil
                };

                $.ajax({
                    type: 'POST',
                    url: '/api/Vozac/',
                    data: JSON.stringify(vozac),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert('Data was succesfully captured');
                            $(location).attr('href', 'wellcome.html');
                        }
                        else {
                            alert('Error');
                        }
                    }
                })

            })

            $('#dodajVozaca').click(function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();

                $('#PretraziDispecerdiv').hide();
                $('#PretraziDispecerSvediv').hide();
                $('#block').hide();

                $('#PrikazDispecerSve').hide();
                $('#zadodajVoznju').hide();
                $('#PrikazDispecer').hide();

                $('#map1').show();
                $('#zadodajVozaca').toggle(500);
            })

            // Dodavanje voznje iz dispecera

            $('#dodajVoznju').click(function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();

                $('#PretraziDispecerdiv').hide();
                $('#PretraziDispecerSvediv').hide();
                $('#block').hide();


                $('#PrikazDispecerSve').hide();
                $('#map1').show();
                $('#PrikazDispecer').hide();

                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').toggle(500);
            })


            $('#dispecerDodajVoznju').click(function () {
                $.get("/api/Vozac", function (data, status) {
                    let pom = `${$('#dispecerTipVozila').val()}`
                    let pom1;
                    let koliko = 0;
                    if (pom == "KOMBI VOZILO") {
                        pom1 = 1;
                    }
                    else {
                        pom1 = 0;
                    }

                    let table = "<table border='1'><tr><td><select id=\"vozac\" name=\"VozacVoznja\">";

                    for (driver in data) {
                        if (data[driver].Automobil.Tip == pom1 && data[driver].Zauzet == false) {
                            table += "<option>" + data[driver].KorisnickoIme + "</option>";
                            koliko++;
                        }
                    }

                    table += "</select></td></tr></table><button id=\"dodajVoznjuDispecer2\" type=\"button\"><b>Dodaj voznju</b></button>";
                    if (koliko == 0) {
                        alert('Trenutno nema slobodnih vozaca sa trazenim automobilom');
                        $(location).attr('href', 'wellcome.html');
                    } else {
                        $("#zadodajVoznju").append(table);
                    }
                });
            });

            $(document).on('click', '#dodajVoznjuDispecer2', function () {

                let niz = fulAdresa.split(",");

                $("#DodavanjeVoznjeDispecer").show();
                let pom = `${$('#vozac').val()}`;
                localStorage.setItem("Vozac", pom);
                let pomAuto = `${$('#dispecerTipVozila').val()}`;
                let auto;
                if (pomAuto == "KOMBI VOZILO")
                    auto = "KOMBIVOZILA";
                else
                    auto = "PUTNICKIAUTOMOBIL";

                let adresa = {
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`
                };

                let lokacija = {
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresa
                };

                let NovaVoznjaDispecera = {
                    Lokacija: lokacija,
                    Automobil: auto,
                    Vozac: localStorage.getItem("Vozac"),
                    Dispecer: localStorage.getItem("Ulogovan"),
                }

                $.ajax({
                    type: 'POST',
                    url: '/api/Dispecer/PostD',
                    data: JSON.stringify(NovaVoznjaDispecera),
                    contentType: 'application/json;charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (!data) {
                            alert("Vožnja nije dodata!");
                        } else {
                            alert("Uspešno ste dodali novu vožnju!");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            });

            // Dodavanje Voznje iz korisnika

            $('#dodajVoznjuKorisnik').click(function () {
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#PrikazKorisnik').hide();

                $('#PretraziKorisnikdiv').hide();

                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').hide();

                $('#divDodajVoznju').toggle(500);
                $('#map1').show();
            })

            $('#DodajVoznju').click(function () {
                let niz = fulAdresa.split(",");

                let adresa = {
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`
                };

                let lokacija = {
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresa
                };

                let NovaVoznjaKorisnika = {
                    Lokacija: lokacija,
                    Automobil: `${$('#TipVozila').val()}`,
                    Musterija: localStorage.getItem("Ulogovan"),
                }

                $.ajax({
                    type: 'POST',
                    url: '/api/Registracija/Post',
                    data: JSON.stringify(NovaVoznjaKorisnika),
                    contentType: 'application/json;charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (!data) {
                            alert("Vožnja nije dodata!");
                        } else {
                            alert("Uspešno ste dodali novu vožnju!");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            })

            /*$('#izmeniVoznjuKorisnik').click(function () {
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#divDodajVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divIzmeniVoznju').toggle(500);
            })*/



            /*$('#odustaniOdVoznjeKorisnik').click(function () {
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').toggle(500);
            })*/

            // Kad se uloguje VOZAC

            $('#profilVozaca').click(function () {
                $('zaizmenuVozaca').hide();
                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').hide();
                $('#SortirajSvojeVoznjediv').hide();

                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PrikaziVoznjeVozac').hide();

                $('#1v').text(korisnik.KorisnickoIme);
                $('#2v').text(korisnik.Lozinka);
                $('#3v').text(korisnik.Ime);
                $('#4v').text(korisnik.Prezime);
                $('#5v').text(korisnik.JMBG);
                if (korisnik.Pol == 1) {
                    $('#6v').text("Zenski");
                } else {
                    $('#6v').text("Muski");
                }
                $('#7v').text(korisnik.Telefon);
                $('#8v').text(korisnik.Email);
                $('#9v').text(korisnik.Lokacija.X);
                $('#10v').text(korisnik.Lokacija.Y);
                $('#11v').text(korisnik.Lokacija.Adresa.UlicaBroj);
                $('#12v').text(korisnik.Lokacija.Adresa.NaseljenoMjesto);
                $('#13v').text(korisnik.Lokacija.Adresa.PozivniBroj);
                $('#14v').text(korisnik.Automobil.GodisteAutomobila);
                $('#15v').text(korisnik.Automobil.BrojRegistarskeOznake);
                $('#16v').text(korisnik.Automobil.BrojTaksiVozila);
                if (korisnik.Automobil.Tip == 0) {
                    $('#17v').text("Kombi vozilo");
                }
                else {
                    $('#17v').text("Putnicki automobil");
                }
                $('#zaprofilVozaca').toggle(500);
            })

            $('#IzmeniVozaca').click(function () {
                let niz = fulAdresa.split(",");

                let adresa = {
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`
                }

                let lokacija = {
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresa
                };


                let automobil = {
                    Vozac: `${$('#KorisnickoImeV').val()}`,
                    GodisteAutomobila: `${$('#GodisteAutomobilaV').val()}`,
                    BrojRegistarskeOznake: `${$('#BrojRegistarskeOznakeV').val()}`,
                    BrojTaksiVozila: `${$('#BrojTaksiVozilaV').val()}`,
                    Tip: `${$('#TipV').val()}`,
                };

                let vozac = {
                    KorisnickoIme: `${$('#KorisnickoImeV').val()}`,
                    Lozinka: `${$('#LozinkaV').val()}`,
                    Ime: `${$('#ImeV').val()}`,
                    Prezime: `${$('#PrezimeV').val()}`,
                    Pol: korisnik.Pol,
                    JMBG: `${$('#JMBGV').val()}`,
                    Telefon: `${$('#TelefonV').val()}`,
                    Email: `${$('#EmailV').val()}`,
                    Uloga: 'VOZAC',
                    Voznja: "nema voznje",
                    Lokacija: lokacija,
                    Automobil: automobil
                };

                $.ajax({
                    type: 'PUT',
                    url: '/api/Vozac/' + korisnik.Id,
                    data: JSON.stringify(vozac),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            localStorage.setItem("Ulogovan", vozac.KorisnickoIme);
                            alert('Data was succesfully captured');
                            $(location).attr('href', 'wellcome.html');
                        }
                        else {
                            alert('Error');
                        }
                    }
                })
            })

            $('#promenaLokacijeVozacaDugme').click(function () {
                let niz = fulAdresa.split(",");
                let adresa = {
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`
                }

                let lokacija = {
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresa
                };

                let vozac = {
                    Id: korisnik.Id,
                    Lokacija: lokacija
                };

                $.ajax({
                    type: 'PUT',
                    url: '/api/Vozac/',
                    data: JSON.stringify(vozac),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            localStorage.setItem("Ulogovan", korisnik.KorisnickoIme);
                            alert('Data was succesfully captured');
                            $(location).attr('href', 'wellcome.html');
                        }
                        else {
                            alert('Error');
                        }
                    }
                })

            })

            $('#izmeniVozaca').click(function () {
                $('#zaprofilVozaca').hide();
                $('#map1').show();


                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').hide();
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#SortirajSvojeVoznjediv').hide();

                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PrikaziVoznjeVozac').hide();

                $('#zaizmenuVozaca').toggle(500);
            })

            $('#odjaviVozaca').click(function () {
                localStorage.setItem("Ulogovan", null);
                $(location).attr('href', 'index.html');
            })

            // Prikaz svih kreiranih voznji

            $("#VozacKreirane").click(function () {
                //$("#PrikaziVoznjeVozac").hide();
                $('#PrikaziVoznjeVozac').hide();
                $("#PrikaziKreiraneVoznjeVozac").show();

                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').hide();
                $('#SortirajSvojeVoznjediv').hide();

                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();

                $.get("/api/Voznja", function (data, status) {
                    let tableOfProducts = "<table border='1'>";
                    tableOfProducts += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th></tr>`;
                    for (voznja in data) {
                        if (data[voznja].Status == 0 && (data[voznja].Automobil == korisnik.Automobil.Tip) && (data[voznja].Vozac != korisnik.KorisnickoIme)) {
                            tableOfProducts += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Lokacija.Adresa.UlicaBroj}</td><td>${data[voznja].Lokacija.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Lokacija.Adresa.PozivniBroj}</td><td>Kreirana</td>`;
                            tableOfProducts += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td></tr>`;
                        }
                    }
                    tableOfProducts += "</table>";
                    tableOfProducts += "<button id=\"sortirajPoUdaljenosti\">Sortiraj</button>";
                    $("#PrikaziKreiraneVoznjeVozac").html(tableOfProducts);
                });
            });

            $(document).on('click', '#sortirajPoUdaljenosti', function () {
                $('#PrikaziVoznjeVozac').hide();
                $("#PrikaziKreiraneVoznjeVozac").show();

                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();

                let vozacevaLokacija;
                $.ajax({
                    type: 'GET',
                    url: '/api/Vozac/',
                    async: false,
                    success: function (data) {
                        for (vozac in data) {
                            if (data[vozac].Id == korisnik.Id) {
                                vozacevaLokacija = data[vozac].Lokacija;
                            }
                        }

                    }
                })

                let voznjeVozaca;
                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        voznjeVozaca = [];
                        for (voznja in data) {
                            if (data[voznja].Status == 0) {
                                voznjeVozaca.push(data[voznja]);//ovde su sve kreirane voznje 
                            }
                        }
                    }
                })

                let sortiraj = [];
                for (var voznja in voznjeVozaca) {
                    // c = √ ((xA − xB) ² + (yA − yB) ² )
                    let rastojanje;
                    rastojanje = Math.sqrt(Math.pow(vozacevaLokacija.X - voznjeVozaca[voznja].Lokacija.X, 2) + Math.pow(vozacevaLokacija.Y - voznjeVozaca[voznja].Lokacija.Y, 2));
                    let voznje1 = {
                        Id: voznjeVozaca[voznja].IdVoznje,//id voznje
                        Rastojanje: rastojanje,//od vozaca
                    }
                    sortiraj.push(voznje1);
                }
                sortiraj.sort(function (a, b) {
                    return a.Rastojanje - b.Rastojanje;
                })
                let temp = [];
                for (var voznja in sortiraj) {
                    for (var voznje in voznjeVozaca) {
                        if (sortiraj[voznja].Id == voznjeVozaca[voznje].IdVoznje)
                            temp.push(voznjeVozaca[voznje]);
                    }
                }
                var data = temp;
                let tableOfProducts = "<table border='1'>";
                tableOfProducts += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th></tr>`;
                for (voznja in data) {
                    if (data[voznja].Status == 0 && (data[voznja].Automobil == korisnik.Automobil.Tip) && (data[voznja].Vozac != korisnik.KorisnickoIme)) {
                        tableOfProducts += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Lokacija.Adresa.UlicaBroj}</td><td>${data[voznja].Lokacija.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Lokacija.Adresa.PozivniBroj}</td><td>Kreirana</td>`;
                        tableOfProducts += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td></tr>`;
                    }
                }
                tableOfProducts += "</table>";
                tableOfProducts += "<button id=\"sortirajPoUdaljenosti\">Sortiraj</button>";
                $("#PrikaziKreiraneVoznjeVozac").html(tableOfProducts);

            })

            // Kraj

            // Prihvati voznju

            $(document).on('click', '#prihvatiVoznju', function () {
                let id6 = $(this).val();
                $("#PrikaziVoznjeVozac").hide();
                $("#IzmjenaKorisnik2").hide();
                $("#PrikazKorisnik2").hide();
                $("#PrikaziKreiraneVoznjeVozac").show();

                let voznja = {
                    Vozac: korisnik.KorisnickoIme,
                    Iznos: 0,
                    Dispecer: null,
                    Status: "PRIHVACENA",

                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Voznja/PutPrihvacena/' + id6,
                    data: JSON.stringify(voznja),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert('Uspjesno prihvacena voznja');
                            $(location).attr('href', 'wellcome.html');
                        } else {
                            alert('Ne postoji voznja koju zelite da prihvatite');
                        }
                    },
                })
            });

            // Kraj

            $(document).on('click', '#uspjesnaVoznja', function () {
                let fired_button9 = $(this).val();
                localStorage.setItem("uspjesnaVoznja", fired_button9);

                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').show();
                $('#UspjesnaVoznjaNoComm').show();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PrikaziVoznjeVozac').hide();

                $.get("/api/Voznja", function (data, status) {
                    let id = localStorage.getItem("uspjesnaVoznja");
                    let tableofData10 = "<table border='1'>";
                    for (voznja in data) {
                        if (data[voznja].IdVoznje == id) {
                            tableofData10 += //"<tr><td>Id lokacije odredista</td><td><input id=\"idlokodredista\" type=\"text\" name=\"IdLok\" value=\"" + data[voznja].Odrediste.IdLok + "\"/></td></tr>" +
                                "<tr><td>Iznos</td><td><input id=\"iznosodredista\" type=\"text\" name=\"Iznos\" value=\"" + data[voznja].Iznos + "\"/></td></tr>" +
                                "<tr><td colspan=\"2\" align=\"center\"><button id=\"potvrdiUnos\" type=\"button\"><b>Potvrdi unos odredista i iznosa</b></button></td></tr>";
                        }
                    }
                    tableofData10 += "</table>";
                    $("#IzmjenaShow10").html(tableofData10);
                });
            });

            $(document).on('click', '#potvrdiUnos', function () {
                let id10 = localStorage.getItem("uspjesnaVoznja");

                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').show();
                $('#UspjesnaVoznjaNoComm').show();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PrikaziVoznjeVozac').hide();

                let niz = fulAdresa.split(",");


                let adresaOdrediste = {
                    //IdAdr: `${$('#idadrodredista').val()}`,
                    UlicaBroj: `${niz[2]}`,
                    NaseljenoMjesto: `${niz[3]}`,
                    PozivniBroj: `${''}`,
                };
                let lokacijaOdrediste = {
                    //IdLok: `${$('#idlokodredista').val()}`,
                    X: `${niz[0]}`,
                    Y: `${niz[1]}`,
                    Adresa: adresaOdrediste,
                };
                let voznja10 = {
                    Vozac: korisnik.KorisnickoIme,
                    Odrediste: lokacijaOdrediste,
                    Iznos: `${$('#iznosodredista').val()}`,
                    Status: "USPESNA",
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Voznja/PutVozacUspesno/' + id10,
                    data: JSON.stringify(voznja10),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert('Uspjesna voznja');
                            $(location).attr('href', 'wellcome.html');
                        } else {
                            alert('Ne postoji voznja koju zelite proglasiti uspjesnom.');
                        }
                    },
                })
            });

            $(document).on('click', '#neuspjesnaVoznjaKomentar', function () {
                let fired_button7 = $(this).val();
                localStorage.setItem("neuspjesnaVoznja", fired_button7);
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').show();
                $('#promenaLokacijeVozaca').hide();
                $('#PrikaziVoznjeVozac').hide();
                $.get("/api/Voznja", function (data, status) {
                    let id = localStorage.getItem("neuspjesnaVoznja");
                    let tableofData7 = "<table border='1'>";
                    for (voznja in data) {
                        if (data[voznja].IdVoznje == id) {
                            tableofData7 += "<tr><td>Opis</td><td><input id=\"opis1\" type=\"text\" name=\"Opis\" value=\"" + data[voznja].Komentar.Opis + "\"/></td></tr>" +
                                "<tr><td>Datum objave</td><td><input id=\"datum1\" type=\"datetime\" name=\"DTObjave\" value=\"" + data[voznja].Komentar.DatumObjave + "\"/></td></tr>" +
                                "<tr><td>Ocjena</td><td><input id=\"ocjena1\" min=\"0\" max=\"5\" type=\"number\" name=\"Ocjena\" value=\"" + data[voznja].Komentar.OcenaVoznje + "\"/></td></tr>" +
                                "<tr><td colspan=\"2\" align=\"center\"><button id=\"neuspjesnaVoznjaPotvrdi\" type=\"button\"><b>Potvrdi komentar</b></button></td></tr>";
                        }
                    }
                    tableofData7 += "</table>";
                    $("#IzmjenaShow7").html(tableofData7);
                });
            });

            $(document).on('click', '#neuspjesnaVoznjaPotvrdi', function () {
                let id8 = localStorage.getItem("neuspjesnaVoznja");

                let komentarVoznja1 = {
                    Opis: `${$('#opis1').val()}`,
                    DatumObjave: `${$('#datum1').val()}`,
                    OcenaVoznje: `${$('#ocjena1').val()}`,
                    KorisnickoIme: korisnik.KorisnickoIme,
                    IdVoznje: id8,
                };
                let voznja1 = {
                    Vozac: korisnik.KorisnickoIme,
                    Iznos: 0,
                    Komentar: komentarVoznja1,
                    Status: "NEUSPESNA",
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Voznja/PutVozacNeuspesno/' + id8,
                    data: JSON.stringify(voznja1),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert('Neuspjesna voznja');
                            $(location).attr('href', 'wellcome.html');
                        } else {
                            alert('Ne postoji voznja koju zelite proglasiti neuspjesnom.');
                        }
                    },
                })
            })

            $('#PromenaLok').click(function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').show();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').show();
                $('#PrikaziVoznjeVozac').hide();

    
                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').hide();
                $('#SortirajSvojeVoznjediv').hide();

            })

            $('#PrikazM').click(function () {
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#map1').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').hide();
                $('#PretraziKorisnikdiv').hide();
                $('#PrikazKorisnik').show();
            })

            $('#PrikazD').click(function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#PretraziDispecerdiv').hide();
                $('#PretraziDispecerSvediv').hide();
                $('#PrikazDispecer').show();
                $('#block').hide();
            })

            $('#PrikazV').click(function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').hide();
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#PrikaziVoznjeVozac').show();
                $('#SortirajSvojeVoznjediv').hide();
            })

            // Odavde pocinje kompletna pretraga i sortiranje korisnika

            $('#PretraziKorisnik').click(function () {
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#map1').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').hide();
                $('#PrikazKorisnik').hide();
                $('#PretraziKorisnikdiv').show();

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";
                kopija = [];
                pretraga = false;
                $('#PretraziKorisnikdiv').html(table);
            })

            let pretraga = false;
            let kopija = [];

            $(document).on('click', '#pretragaKorisnikRefreshButton', function () {
                $('#zaprofil').hide();
                $('#zaizmenu').hide();
                $('#map1').hide();
                $('#divDodajVoznju').hide();
                $('#divIzmeniVoznju').hide();
                $('#divOtkaziVoznju').hide();
                $('#divKomentarisiVoznju').hide();
                $('#PrikazKorisnik').hide();
                $('#PretraziKorisnikdiv').show();

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";
                pretraga = false;
                kopija = [];
                $('#PretraziKorisnikdiv').html(table);
            })

            $(document).on('click', '#filtrirajKorisnikButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretraga) {
                            data = kopija;
                        } else {
                            kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        let stanje = `${$('#filtriranjeSelectKorisnik').val()}`;

                        table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"
                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Musterija && data[voznja].Status == stanje) {
                                vs.push(data[voznja]);
                                table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                switch (data[voznja].Automobil) {
                                    case 0:
                                        table += "Putnicki automobil";
                                        break;
                                    case 1:
                                        table += "Kombi vozilo";
                                        break;
                                }
                                table += "</td>";

                                if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                    table += ("<td>/</td>");
                                }
                                else {
                                    table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                }

                                if (data[voznja].Iznos != "0") {
                                    table += ("<td>" + data[voznja].Iznos + "</td>");
                                }
                                else {
                                    table += ("<td>/</td>");
                                }

                                table += ('<td><textarea rows="5" cols="30" disabled>');

                                if (data[voznja].Komentar.Opis == "") {
                                    table += ("Komentar nije dodat!" + "</textarea></td>");
                                } else {
                                    table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                }

                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }
                                table += "<td>";
                                if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                    table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                    table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                    table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                } else {
                                    table += ("Nedostupne");
                                }
                                table += "</td></tr>";
                            }
                        }
                        table += "</table>";
                        kopija = vs;
                        pretraga = true;
                        $('#PretraziKorisnikdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajOcjenaKorisnikButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretraga) {
                            data = kopija;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p><hr />";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"

                        data.sort(function (a, b) {
                            return b.Komentar.OcenaVoznje - a.Komentar.OcenaVoznje;
                        })

                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Musterija) {
                                vs.push(data[voznja]);
                                table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                switch (data[voznja].Automobil) {
                                    case 0:
                                        table += "Putnicki automobil";
                                        break;
                                    case 1:
                                        table += "Kombi vozilo";
                                        break;
                                }
                                table += "</td>";

                                if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                    table += ("<td>/</td>");
                                }
                                else {
                                    table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                }

                                if (data[voznja].Iznos != "0") {
                                    table += ("<td>" + data[voznja].Iznos + "</td>");
                                }
                                else {
                                    table += ("<td>/</td>");
                                }

                                table += ('<td><textarea rows="5" cols="30" disabled>');

                                if (data[voznja].Komentar.Opis == "") {
                                    table += ("Komentar nije dodat!" + "</textarea></td>");
                                } else {
                                    table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                }

                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }
                                table += "<td>";
                                if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                    table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                    table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                    table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                } else {
                                    table += ("Nedostupne");
                                }
                                table += "</td></tr>";
                            }
                        }
                        table += "</table>";
                        kopija = vs;
                        pretraga = true;
                        $('#PretraziKorisnikdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajDatumKorisnikButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretraga) {
                            data = kopija;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p><hr />";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"

                        data.sort(function (a, b) {
                            return new Date(b.Komentar.DatumObjave) - new Date(a.Komentar.DatumObjave);
                        })

                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Musterija) {
                                vs.push(data[voznja]);
                                table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                switch (data[voznja].Automobil) {
                                    case 0:
                                        table += "Putnicki automobil";
                                        break;
                                    case 1:
                                        table += "Kombi vozilo";
                                        break;
                                }
                                table += "</td>";

                                if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                    table += ("<td>/</td>");
                                }
                                else {
                                    table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                }

                                if (data[voznja].Iznos != "0") {
                                    table += ("<td>" + data[voznja].Iznos + "</td>");
                                }
                                else {
                                    table += ("<td>/</td>");
                                }

                                table += ('<td><textarea rows="5" cols="30" disabled>');

                                if (data[voznja].Komentar.Opis == "") {
                                    table += ("Komentar nije dodat!" + "</textarea></td>");
                                } else {
                                    table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                }

                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }
                                table += "<td>";
                                if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                    table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                    table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                    table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                } else {
                                    table += ("Nedostupne");
                                }
                                table += "</td></tr>";
                            }
                        }
                        table += "</table>";
                        kopija = vs;
                        pretraga = true;
                        $('#PretraziKorisnikdiv').html(table);
                    }
                })
            })


            $(document).on('click', '#pretragaKorisnikOcjenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretraga) {
                            data = kopija;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p><hr />";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";

                        let OcjenaOd = `${$('#pretragaOdOcjenaKorisnik').val()}`;
                        let OcjenaDo = `${$('#pretragaDoOcjenaKorisnik').val()}`;

                        if (OcjenaOd == 0 && OcjenaDo == 0) {
                            alert("Unesite pravilno polja za pretragu!");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"
                            if (OcjenaDo == 0 && OcjenaOd != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Musterija == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            }
                            else if (OcjenaOd != 0 && OcjenaDo != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Komentar.OcenaVoznje <= OcjenaDo && data[voznja].Musterija == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje <= OcjenaDo && data[voznja].Musterija == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            }
                            table += "</table>";
                            kopija = vs;
                            pretraga = true;
                            $('#PretraziKorisnikdiv').html(table);
                        }
                    }
                })
            })


            $(document).on('click', '#pretragaKorisnikCijenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretraga) {
                            data = kopija;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p><hr />";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";

                        let CijenaOd = `${$('#pretragaOdCijenaKorisnik').val()}`;
                        let CijenaDo = `${$('#pretragaDoCijenaKorisnik').val()}`;

                        if (CijenaOd == "" && CijenaDo == "") {
                            alert("Pravilno unesite vrednosti");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"
                            if (CijenaDo == "" && CijenaOd != "") {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Status == 6 && data[voznja].Musterija == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            }
                            else if (CijenaOd != "" && CijenaDo != "") {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Iznos <= CijenaDo && data[voznja].Status == 6 && data[voznja].Musterija == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Iznos <= CijenaDo && data[voznja].Status == 6 && data[voznja].Musterija == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            }
                            table += "</table>";
                            kopija = vs;
                            pretraga = true;
                            $('#PretraziKorisnikdiv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaKorisnikDatumButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretraga) {
                            data = kopija;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectKorisnik\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajKorisnikButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaKorisnikButton\">Sortiraj</button></p><p>Sortiranje po datumu: <button id=\"sortirajDatumKorisnikButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaKorisnik\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaKorisnikOcjenaButton\">Pretrazi</button></p><hr />";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaKorisnik\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaKorisnik\"/> <button id=\"pretragaKorisnikCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumKorisnik\"/> do: <input type=\"date\" id=\"pretragaDoDatumKorisnik\"/> <button id=\"pretragaKorisnikDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaKorisnikRefreshButton\">Osvezi</button><hr /> ";

                        let DatumOd = `${$('#pretragaOdDatumKorisnik').val()}`;
                        let DatumDo = `${$('#pretragaDoDatumKorisnik').val()}`;

                        if (DatumDo == "" && DatumOd == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"
                            if (DatumDo == "" && DatumOd != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && data[voznja].Musterija == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            }
                            else if (DatumOd != "" && DatumDo != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && new Date(date[0]) <= new Date(DatumDo) && data[voznja].Musterija == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) <= new Date(DatumDo) && data[voznja].Musterija == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td><td>" + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + ", " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");
                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnicki automobil";
                                                break;
                                            case 1:
                                                table += "Kombi vozilo";
                                                break;
                                        }
                                        table += "</td>";

                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("<td>/</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        }
                                        else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea></td>");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        table += "<td>";
                                        if (vratiStatusVoznje(data[voznja].Status) == "Kreirana") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="odustani">Odustani</button><br /><br />`);
                                            table += (`<button value=${data[voznja].IdVoznje} id="izmeniV">Izmeni</button>`);
                                        } else if (vratiStatusVoznje(data[voznja].Status) == "Uspešna") {
                                            table += (`<button value=${data[voznja].IdVoznje} id="UspesanKomentar">Komentar</button>`);
                                        } else {
                                            table += ("Nedostupne");
                                        }
                                        table += "</td></tr>";
                                    }
                                }
                            }
                            table += "</table>";
                            kopija = vs;
                            pretraga = true;
                            $('#PretraziKorisnikdiv').html(table);
                        }
                    }
                })
            })

            // Odavde pocinje kompletna pretraga dispecera

            $('#PretraziDispecer').click(function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#block').hide();
                $('#PretraziDispecerdiv').show();
                $('#PretraziDispecerSvediv').hide();
                $('#PrikazDispecer').hide();

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";
                kopijaDispecer = [];
                pretragaDispecer = false;
                $('#PretraziDispecerdiv').html(table);
            })

            let kopijaDispecer = [];
            let pretragaDispecer = false;

            $(document).on('click', '#pretragaDispecerRefreshButton', function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#PretraziDispecerdiv').show();
                $('#PrikazDispecer').hide();

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";
                kopijaDispecer = [];
                pretragaDispecer = false;
                $('#PretraziDispecerdiv').html(table);
            })

            $(document).on('click', '#filtrirajDispecerButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecer) {
                            data = kopijaDispecer;
                        } else {
                            kopijaDispecer = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        let stanje = `${$('#filtriranjeSelectDispecer').val()}`;

                        table += '<tr><th>Id vožnje</th><th>Datum</th><th>Mušterija</th><th>Vozač</th><th >Mesto polaska</th><th>Tip auta</th><th>Ordedište</th><th>Iznos</th><th>Komentar</th><th>Status vožnje</th></tr>';
                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Dispecer && data[voznja].Status == stanje) {
                                vs.push(data[voznja]);
                                table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                if (data[voznja].Musterija == "") {
                                    table += '<td>/</td>';
                                } else {
                                    table += ('<td>' + data[voznja].Musterija + '</td>');
                                }

                                if (data[voznja].Vozac == "") {
                                    table += '<td>/</td>';
                                } else {
                                    table += ('<td>' + data[voznja].Vozac + '</td>');
                                }

                                table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                switch (data[voznja].Automobil) {
                                    case 0:
                                        table += "Putnički";
                                        break;
                                    case 1:
                                        table += "Kombi";
                                        break;
                                }


                                if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                    table += ("</td><td>/" + "</td>");
                                }
                                else {
                                    table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                }

                                if (data[voznja].Iznos != "0") {
                                    table += ("<td>" + data[voznja].Iznos + "</td>");
                                } else {
                                    table += ("<td>/</td>");
                                }

                                table += ('<td><textarea rows="5" cols="30" disabled>');

                                if (data[voznja].Komentar.Opis == "") {
                                    table += ("Komentar nije dodat!" + "</textarea ></td >");
                                } else {
                                    table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                }

                                table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                table += "</tr>";
                            }
                        }
                        table += "</table>";
                        kopijaDispecer = vs;
                        pretragaDispecer = true;
                        $('#PretraziDispecerdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajOcjenaDispecerButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecer) {
                            data = kopijaDispecer;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        table += '<tr><th>Id vožnje</th><th>Datum</th><th>Mušterija</th><th>Vozač</th><th >Mesto polaska</th><th>Tip auta</th><th>Ordedište</th><th>Iznos</th><th>Komentar</th><th>Status vožnje</th></tr>';

                        data.sort(function (a, b) {
                            return b.Komentar.OcenaVoznje - a.Komentar.OcenaVoznje;
                        })

                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Dispecer) {
                                vs.push(data[voznja]);
                                table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                if (data[voznja].Musterija == "") {
                                    table += '<td>/</td>';
                                } else {
                                    table += ('<td>' + data[voznja].Musterija + '</td>');
                                }

                                if (data[voznja].Vozac == "") {
                                    table += '<td>/</td>';
                                } else {
                                    table += ('<td>' + data[voznja].Vozac + '</td>');
                                }

                                table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                switch (data[voznja].Automobil) {
                                    case 0:
                                        table += "Putnički";
                                        break;
                                    case 1:
                                        table += "Kombi";
                                        break;
                                }


                                if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                    table += ("</td><td>/" + "</td>");
                                }
                                else {
                                    table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                }

                                if (data[voznja].Iznos != "0") {
                                    table += ("<td>" + data[voznja].Iznos + "</td>");
                                } else {
                                    table += ("<td>/</td>");
                                }

                                table += ('<td><textarea rows="5" cols="30" disabled>');

                                if (data[voznja].Komentar.Opis == "") {
                                    table += ("Komentar nije dodat!" + "</textarea ></td >");
                                } else {
                                    table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                }

                                table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                table += "</tr>";
                            }
                        }
                        table += "</table>";
                        kopijaDispecer = vs;
                        pretragaDispecer = true;
                        $('#PretraziDispecerdiv').html(table);
                    }
                })

            })

            $(document).on('click', '#sortirajDatumDispecerButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecer) {
                            data = kopijaDispecer;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        table += '<tr><th>Id vožnje</th><th>Datum</th><th>Mušterija</th><th>Vozač</th><th >Mesto polaska</th><th>Tip auta</th><th>Ordedište</th><th>Iznos</th><th>Komentar</th><th>Status vožnje</th></tr>';

                        data.sort(function (a, b) {
                            return new Date(b.Komentar.DatumObjave) - new Date(a.Komentar.DatumObjave);
                        })

                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Dispecer) {
                                vs.push(data[voznja]);
                                table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                if (data[voznja].Musterija == "") {
                                    table += '<td>/</td>';
                                } else {
                                    table += ('<td>' + data[voznja].Musterija + '</td>');
                                }

                                if (data[voznja].Vozac == "") {
                                    table += '<td>/</td>';
                                } else {
                                    table += ('<td>' + data[voznja].Vozac + '</td>');
                                }

                                table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                switch (data[voznja].Automobil) {
                                    case 0:
                                        table += "Putnički";
                                        break;
                                    case 1:
                                        table += "Kombi";
                                        break;
                                }


                                if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                    table += ("</td><td>/" + "</td>");
                                }
                                else {
                                    table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                }

                                if (data[voznja].Iznos != "0") {
                                    table += ("<td>" + data[voznja].Iznos + "</td>");
                                } else {
                                    table += ("<td>/</td>");
                                }

                                table += ('<td><textarea rows="5" cols="30" disabled>');

                                if (data[voznja].Komentar.Opis == "") {
                                    table += ("Komentar nije dodat!" + "</textarea ></td >");
                                } else {
                                    table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                }

                                table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                table += "</tr>";
                            }
                        }
                        table += "</table>";
                        kopijaDispecer = vs;
                        pretragaDispecer = true;
                        $('#PretraziDispecerdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerOcjenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecer) {
                            data = kopijaDispecer;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";

                        let OcjenaOd = `${$('#pretragaOdOcjenaDispecer').val()}`;
                        let OcjenaDo = `${$('#pretragaDoOcjenaDispecer').val()}`;

                        if (OcjenaOd == 0 && OcjenaDo == 0) {
                            alert("Unesite pravilno polja za pretragu!");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += '<tr><th>Id vožnje</th><th>Datum</th><th>Mušterija</th><th>Vozač</th><th >Mesto polaska</th><th>Tip auta</th><th>Ordedište</th><th>Iznos</th><th>Komentar</th><th>Status vožnje</th></tr>';
                            if (OcjenaDo == 0 && OcjenaOd != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Dispecer == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            }
                            else if (OcjenaOd != 0 && OcjenaDo != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Komentar.OcenaVoznje <= OcjenaDo && data[voznja].Dispecer == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje <= OcjenaDo && data[voznja].Dispecer == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaDispecer = vs;
                            pretragaDispecer = true;
                            $('#PretraziDispecerdiv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerCijenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecer) {
                            data = kopijaDispecer;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";

                        let CijenaOd = `${$('#pretragaOdCijenaDispecer').val()}`;
                        let CijenaDo = `${$('#pretragaDoCijenaDispecer').val()}`;

                        if (CijenaOd == "" && CijenaDo == "") {
                            alert("Pravilno unesite vrednosti");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"
                            if (CijenaDo == "" && CijenaOd != "") {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Status == 6 && data[voznja].Dispecer == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            }
                            else if (CijenaOd != "" && CijenaDo != "") {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Iznos <= CijenaDo && data[voznja].Status == 6 && data[voznja].Dispecer == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Iznos <= CijenaDo && data[voznja].Status == 6 && data[voznja].Dispecer == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaDispecer = vs;
                            pretragaDispecer = true;
                            $('#PretraziDispecerdiv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerDatumButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecer) {
                            data = kopijaDispecer;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecer\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecer\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecer\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecer\"/> <button id=\"pretragaDispecerCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecer\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecer\"/> <button id=\"pretragaDispecerDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerRefreshButton\">Osvezi</button><hr /> ";

                        let DatumOd = `${$('#pretragaOdDatumDispecer').val()}`;
                        let DatumDo = `${$('#pretragaDoDatumDispecer').val()}`;

                        if (DatumDo == "" && DatumOd == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += "<tr><th>ID voznje</th><th>Datum</th><th>Mesto polaska</th><th>Tip automobila</th><th>Odrediste</th><th>Iznos</th><th>Komentar</th><th>Status voznje</th><th>Opcije</th></tr>"
                            if (DatumDo == "" && DatumOd != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && data[voznja].Dispecer == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            }
                            else if (DatumOd != "" && DatumDo != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && new Date(date[0]) <= new Date(DatumDo) && data[voznja].Dispecer == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) <= new Date(DatumDo) && data[voznja].Dispecer == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += ("<tr><td>" + data[voznja].IdVoznje + "</td><td>" + data[voznja].VremePorudzbine + "</td>");

                                        if (data[voznja].Musterija == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Musterija + '</td>');
                                        }

                                        if (data[voznja].Vozac == "") {
                                            table += '<td>/</td>';
                                        } else {
                                            table += ('<td>' + data[voznja].Vozac + '</td>');
                                        }

                                        table += ('<td>' + data[voznja].Lokacija.Adresa.UlicaBroj + ", " + data[voznja].Lokacija.Adresa.NaseljenoMjesto + " " + data[voznja].Lokacija.Adresa.PozivniBroj + "</td><td>");

                                        switch (data[voznja].Automobil) {
                                            case 0:
                                                table += "Putnički";
                                                break;
                                            case 1:
                                                table += "Kombi";
                                                break;
                                        }


                                        if (data[voznja].Odrediste.Adresa.UlicaBroj == "") {
                                            table += ("</td><td>/" + "</td>");
                                        }
                                        else {
                                            table += ("</td><td>" + data[voznja].Odrediste.Adresa.UlicaBroj + ", " + data[voznja].Odrediste.Adresa.NaseljenoMjesto + " " + data[voznja].Odrediste.Adresa.PozivniBroj + "</td>");
                                        }

                                        if (data[voznja].Iznos != "0") {
                                            table += ("<td>" + data[voznja].Iznos + "</td>");
                                        } else {
                                            table += ("<td>/</td>");
                                        }

                                        table += ('<td><textarea rows="5" cols="30" disabled>');

                                        if (data[voznja].Komentar.Opis == "") {
                                            table += ("Komentar nije dodat!" + "</textarea ></td >");
                                        } else {
                                            table += ("Korisnicko ime: " + data[voznja].Komentar.KorisnickoIme + "\n\nOpis: " + data[voznja].Komentar.Opis + "\n\nOcena: " + data[voznja].Komentar.OcenaVoznje + "\nDatum: " + data[voznja].Komentar.DatumObjave + "</textarea ></td >");
                                        }

                                        table += ("<td>" + vratiStatusVoznje(data[voznja].Status) + "</td>");

                                        table += "</tr>";
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaDispecer = vs;
                            pretragaDispecer = true;
                            $('#PretraziDispecerdiv').html(table);
                        }
                    }
                })
            })


            // Samo za sve voznje unutar dispecera

            $('#PretraziDispecerSve').click(function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#block').hide();
                $('#PretraziDispecerSvediv').show();
                $('#PretraziDispecerdiv').hide();
                $('#PrikazDispecer').hide();

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                $.ajax({
                    type: 'GET',
                    url: '/api/Vozac',
                    async: false,
                    success: function (data) {
                        table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                        for (vozac in data) {
                            table += `<option>${data[vozac].Ime}</option>`;
                        }
                        table += "</select>"
                        table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                        for (vozac in data) {
                            table += `<option>${data[vozac].Prezime}</option>`;
                        }
                        table += "</select> vozaca. ";
                    }
                })

                table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                $.ajax({
                    type: 'GET',
                    url: '/api/Korisnik',
                    async: false,
                    success: function (data) {
                        table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                        for (musterija in data) {
                            table += `<option>${data[musterija].Ime}</option>`;
                        }
                        table += "</select>"
                        table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                        for (musterija in data) {
                            table += `<option>${data[musterija].Prezime}</option>`;
                        }
                        table += "</select> musterije. ";
                    }
                })

                table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";
                kopijaDispecerSve = [];
                pretragaDispecerSve = false;
                $('#PretraziDispecerSvediv').html(table);
            })

            let kopijaDispecerSve = [];
            let pretragaDispecerSve = false;

            $(document).on('click', '#pretragaDispecerSveRefreshButton', function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#PretraziDispecerSvediv').show();
                $('#PretraziDispecerdiv').hide();
                $('#PrikazDispecer').hide();
                


                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                $.ajax({
                    type: 'GET',
                    url: '/api/Vozac',
                    async: false,
                    success: function (data) {
                        table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                        for (vozac in data) {
                            table += `<option>${data[vozac].Ime}</option>`;
                        }
                        table += "</select>"
                        table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                        for (vozac in data) {
                            table += `<option>${data[vozac].Prezime}</option>`;
                        }
                        table += "</select> vozaca. ";
                    }
                })

                table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                $.ajax({
                    type: 'GET',
                    url: '/api/Korisnik',
                    async: false,
                    success: function (data) {
                        table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                        for (musterija in data) {
                            table += `<option>${data[musterija].Ime}</option>`;
                        }
                        table += "</select>"
                        table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                        for (musterija in data) {
                            table += `<option>${data[musterija].Prezime}</option>`;
                        }
                        table += "</select> musterije. ";
                    }
                })

                table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";
                kopijaDispecerSve = [];
                pretragaDispecerSve = false;
                $('#PretraziDispecerSvediv').html(table);
            })

            $(document).on('click', '#filtrirajDispecerSveButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            kopijaDispecerSve = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        let stanje = `${$('#filtriranjeSelectDispecerSve').val()}`;

                        table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                        for (voznja in data) {
                            if (data[voznja].Status == stanje) {
                                vs.push(data[voznja]);
                                if (data[voznja].Automobil == 0) {
                                    table += '<tr><td>Putnički</td>';
                                }
                                else {
                                    table += '<tr><td>Kombi</td>';
                                }
                                table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }

                                table += `<td>${data[voznja].Iznos}</td>`;

                                if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                    table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                } else {
                                    table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                }

                            }

                        }
                        table += "</table>";
                        kopijaDispecerSve = vs;
                        pretragaDispecerSve = true;
                        $("#PretraziDispecerSvediv").html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajOcjenaDispecerSveButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            kopijaDispecerSve = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";


                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";

                        data.sort(function (a, b) {
                            return b.Komentar.OcenaVoznje - a.Komentar.OcenaVoznje;
                        })

                        table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                        for (voznja in data) {
                            vs.push(data[voznja]);
                            if (data[voznja].Automobil == 0) {
                                table += '<tr><td>Putnički</td>';
                            }
                            else {
                                table += '<tr><td>Kombi</td>';
                            }
                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                            if (data[voznja].Status == 0) {
                                table += '<td>Kreirana</td>';
                            } else if (data[voznja].Status == 1) {
                                table += '<td>Formirana</td>';
                            } else if (data[voznja].Status == 2) {
                                table += '<td>Obradjena</td>';
                            } else if (data[voznja].Status == 3) {
                                table += '<td>Prihvacena</td>';
                            } else if (data[voznja].Status == 4) {
                                table += '<td>Otkazana</td>';
                            } else if (data[voznja].Status == 5) {
                                table += '<td>Neuspjesna</td>';
                            } else if (data[voznja].Status == 6) {
                                table += '<td>Uspjesna</td>';
                            }

                            table += `<td>${data[voznja].Iznos}</td>`;

                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                            } else {
                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                            }

                        }
                        table += "</table>";
                        kopijaDispecerSve = vs;
                        pretragaDispecerSve = true;
                        $("#PretraziDispecerSvediv").html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajDatumDispecerSveButton', function () {

                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            kopijaDispecerSve = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";

                        data.sort(function (a, b) {
                            return new Date(b.Komentar.DatumObjave) - new Date(a.Komentar.DatumObjave);
                        })

                        table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                        for (voznja in data) {
                            vs.push(data[voznja]);
                            if (data[voznja].Automobil == 0) {
                                table += '<tr><td>Putnički</td>';
                            }
                            else {
                                table += '<tr><td>Kombi</td>';
                            }
                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                            if (data[voznja].Status == 0) {
                                table += '<td>Kreirana</td>';
                            } else if (data[voznja].Status == 1) {
                                table += '<td>Formirana</td>';
                            } else if (data[voznja].Status == 2) {
                                table += '<td>Obradjena</td>';
                            } else if (data[voznja].Status == 3) {
                                table += '<td>Prihvacena</td>';
                            } else if (data[voznja].Status == 4) {
                                table += '<td>Otkazana</td>';
                            } else if (data[voznja].Status == 5) {
                                table += '<td>Neuspjesna</td>';
                            } else if (data[voznja].Status == 6) {
                                table += '<td>Uspjesna</td>';
                            }

                            table += `<td>${data[voznja].Iznos}</td>`;

                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                            } else {
                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                            }

                        }
                        table += "</table>";
                        kopijaDispecerSve = vs;
                        pretragaDispecerSve = true;
                        $("#PretraziDispecerSvediv").html(table);
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerSveOcjenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        let OcjenaOd = `${$('#pretragaOdOcjenaDispecerSve').val()}`;
                        let OcjenaDo = `${$('#pretragaDoOcjenaDispecerSve').val()}`;

                        if (OcjenaOd == 0 && OcjenaDo == 0) {
                            alert("Unesite pravilno polja za pretragu!");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                            if (OcjenaDo == 0 && OcjenaOd != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;
                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            }
                            else if (OcjenaOd != 0 && OcjenaDo != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Komentar.OcenaVoznje <= OcjenaDo) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;
                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje <= OcjenaDo) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;
                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaDispecerSve = vs;
                            pretragaDispecerSve = true;
                            $('#PretraziDispecerSvediv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerSveCijenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        let CijenaOd = `${$('#pretragaOdCijenaDispecerSve').val()}`;
                        let CijenaDo = `${$('#pretragaDoCijenaDispecerSve').val()}`;

                        if (CijenaOd == "" && CijenaDo == "") {
                            alert("Pravilno unesite vrednosti");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                            if (CijenaDo == "" && CijenaOd != "") {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;

                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            }
                            else if (CijenaOd != "" && CijenaDo != "") {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Iznos <= CijenaDo) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;

                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Iznos <= CijenaDo) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;

                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaDispecerSve = vs;
                            pretragaDispecerSve = true;
                            $('#PretraziDispecerSvediv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerSveDatumButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        let DatumOd = `${$('#pretragaOdDatumDispecerSve').val()}`;
                        let DatumDo = `${$('#pretragaDoDatumDispecerSve').val()}`;

                        if (DatumDo == "" && DatumOd == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                            if (DatumDo == "" && DatumOd != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd)) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;

                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            }
                            else if (DatumOd != "" && DatumDo != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && new Date(date[0]) <= new Date(DatumDo)) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;

                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) <= new Date(DatumDo)) {
                                        vs.push(data[voznja]);
                                        if (data[voznja].Automobil == 0) {
                                            table += '<tr><td>Putnički</td>';
                                        }
                                        else {
                                            table += '<tr><td>Kombi</td>';
                                        }
                                        table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }

                                        table += `<td>${data[voznja].Iznos}</td>`;

                                        if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                        } else {
                                            table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                        }
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaDispecerSve = vs;
                            pretragaDispecerSve = true;
                            $('#PretraziDispecerSvediv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerSveImePrezimeButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        let pom = [];

                        $.ajax({
                            type: 'GET',
                            url: '/api/Vozac',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";

                                pom = data;
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";


                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        let ime = `${$('#pretragaImeVozacaDispecerSve').val()}`;
                        let prezime = `${$('#pretragaPrezimeVozacaDispecerSve').val()}`;

                        if (ime == "" && prezime == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                            if (prezime == "" && ime != "") {
                                for (voznja in data) {
                                    for (pomocna in pom) {
                                        if (data[voznja].Vozac == pom[pomocna].KorisnickoIme && pom[pomocna].Ime == ime) {
                                            vs.push(data[voznja]);
                                            if (data[voznja].Automobil == 0) {
                                                table += '<tr><td>Putnički</td>';
                                            }
                                            else {
                                                table += '<tr><td>Kombi</td>';
                                            }
                                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                            if (data[voznja].Status == 0) {
                                                table += '<td>Kreirana</td>';
                                            } else if (data[voznja].Status == 1) {
                                                table += '<td>Formirana</td>';
                                            } else if (data[voznja].Status == 2) {
                                                table += '<td>Obradjena</td>';
                                            } else if (data[voznja].Status == 3) {
                                                table += '<td>Prihvacena</td>';
                                            } else if (data[voznja].Status == 4) {
                                                table += '<td>Otkazana</td>';
                                            } else if (data[voznja].Status == 5) {
                                                table += '<td>Neuspjesna</td>';
                                            } else if (data[voznja].Status == 6) {
                                                table += '<td>Uspjesna</td>';
                                            }

                                            table += `<td>${data[voznja].Iznos}</td>`;

                                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                            } else {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                            }
                                        }
                                    }
                                }
                            }
                            else if (ime != "" && prezime != "") {
                                for (voznja in data) {
                                    for (pomocna in pom) {
                                        if ((data[voznja].Vozac == pom[pomocna].KorisnickoIme) && (pom[pomocna].Ime == ime) && (pom[pomocna].Prezime == prezime)) {
                                            vs.push(data[voznja]);
                                            if (data[voznja].Automobil == 0) {
                                                table += '<tr><td>Putnički</td>';
                                            }
                                            else {
                                                table += '<tr><td>Kombi</td>';
                                            }
                                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                            if (data[voznja].Status == 0) {
                                                table += '<td>Kreirana</td>';
                                            } else if (data[voznja].Status == 1) {
                                                table += '<td>Formirana</td>';
                                            } else if (data[voznja].Status == 2) {
                                                table += '<td>Obradjena</td>';
                                            } else if (data[voznja].Status == 3) {
                                                table += '<td>Prihvacena</td>';
                                            } else if (data[voznja].Status == 4) {
                                                table += '<td>Otkazana</td>';
                                            } else if (data[voznja].Status == 5) {
                                                table += '<td>Neuspjesna</td>';
                                            } else if (data[voznja].Status == 6) {
                                                table += '<td>Uspjesna</td>';
                                            }

                                            table += `<td>${data[voznja].Iznos}</td>`;

                                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                            } else {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                            }
                                        }
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    for (pomocna in pom) {
                                        if ((data[voznja].Vozac == pom[pomocna].KorisnickoIme) && (pom[pomocna].Prezime == prezime)) {
                                            vs.push(data[voznja]);
                                            if (data[voznja].Automobil == 0) {
                                                table += '<tr><td>Putnički</td>';
                                            }
                                            else {
                                                table += '<tr><td>Kombi</td>';
                                            }
                                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                            if (data[voznja].Status == 0) {
                                                table += '<td>Kreirana</td>';
                                            } else if (data[voznja].Status == 1) {
                                                table += '<td>Formirana</td>';
                                            } else if (data[voznja].Status == 2) {
                                                table += '<td>Obradjena</td>';
                                            } else if (data[voznja].Status == 3) {
                                                table += '<td>Prihvacena</td>';
                                            } else if (data[voznja].Status == 4) {
                                                table += '<td>Otkazana</td>';
                                            } else if (data[voznja].Status == 5) {
                                                table += '<td>Neuspjesna</td>';
                                            } else if (data[voznja].Status == 6) {
                                                table += '<td>Uspjesna</td>';
                                            }

                                            table += `<td>${data[voznja].Iznos}</td>`;

                                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                            } else {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                            }
                                        }
                                    }
                                }
                            }

                            table += "</table>";
                            kopijaDispecerSve = vs;
                            pretragaDispecerSve = true;
                            $('#PretraziDispecerSvediv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaDispecerSveImePrezimeMusterijaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaDispecerSve) {
                            data = kopijaDispecerSve;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectDispecerSve\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajDispecerSveButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaDispecerSveButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumDispecerSveButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaDispecerSve\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaDispecerSveOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaDispecerSve\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaDispecerSve\"/> <button id=\"pretragaDispecerSveCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumDispecerSve\"/> do: <input type=\"date\" id=\"pretragaDoDatumDispecerSve\"/> <button id=\"pretragaDispecerSveDatumButton\">Pretrazi</button></p>";

                        let pom = [];

                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeVozacaDispecerSve\"><option id=\"0\"></option>";
                                for (vozac in data) {
                                    table += `<option>${data[vozac].Prezime}</option>`;
                                }
                                table += "</select> vozaca. ";
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeButton\">Pretrazi</button></p><p>";


                        $.ajax({
                            type: 'GET',
                            url: '/api/Korisnik',
                            async: false,
                            success: function (data) {
                                table += "<p>Pretraga voznji po imenu: <select id=\"pretragaImeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Ime}</option>`;
                                }
                                table += "</select>"
                                table += " i prezimenu <select id=\"pretragaPrezimeMusterijeDispecerSve\"><option id=\"0\"></option>";
                                for (musterija in data) {
                                    table += `<option>${data[musterija].Prezime}</option>`;
                                }
                                table += "</select> musterije. ";

                                pom = data;
                            }
                        })

                        table += " <button id=\"pretragaDispecerSveImePrezimeMusterijaButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaDispecerSveRefreshButton\">Osvezi</button><hr /> ";

                        let ime = `${$('#pretragaImeMusterijeDispecerSve').val()}`;
                        let prezime = `${$('#pretragaPrezimeMusterijeDispecerSve').val()}`;

                        if (ime == "" && prezime == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Tip auta</th><th>Mušterija vožnje</th><th>Datum porudž.</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Iznos</th><th>Vozač</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th></tr>`;
                            if (prezime == "" && ime != "") {
                                for (voznja in data) {
                                    for (pomocna in pom) {
                                        if (data[voznja].Musterija == pom[pomocna].KorisnickoIme && pom[pomocna].Ime == ime) {
                                            vs.push(data[voznja]);
                                            if (data[voznja].Automobil == 0) {
                                                table += '<tr><td>Putnički</td>';
                                            }
                                            else {
                                                table += '<tr><td>Kombi</td>';
                                            }
                                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                            if (data[voznja].Status == 0) {
                                                table += '<td>Kreirana</td>';
                                            } else if (data[voznja].Status == 1) {
                                                table += '<td>Formirana</td>';
                                            } else if (data[voznja].Status == 2) {
                                                table += '<td>Obradjena</td>';
                                            } else if (data[voznja].Status == 3) {
                                                table += '<td>Prihvacena</td>';
                                            } else if (data[voznja].Status == 4) {
                                                table += '<td>Otkazana</td>';
                                            } else if (data[voznja].Status == 5) {
                                                table += '<td>Neuspjesna</td>';
                                            } else if (data[voznja].Status == 6) {
                                                table += '<td>Uspjesna</td>';
                                            }

                                            table += `<td>${data[voznja].Iznos}</td>`;

                                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                            } else {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                            }
                                        }
                                    }
                                }
                            }
                            else if (ime != "" && prezime != "") {
                                for (voznja in data) {
                                    for (pomocna in pom) {
                                        if ((data[voznja].Musterija == pom[pomocna].KorisnickoIme) && (pom[pomocna].Ime == ime) && (pom[pomocna].Prezime == prezime)) {
                                            vs.push(data[voznja]);
                                            if (data[voznja].Automobil == 0) {
                                                table += '<tr><td>Putnički</td>';
                                            }
                                            else {
                                                table += '<tr><td>Kombi</td>';
                                            }
                                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                            if (data[voznja].Status == 0) {
                                                table += '<td>Kreirana</td>';
                                            } else if (data[voznja].Status == 1) {
                                                table += '<td>Formirana</td>';
                                            } else if (data[voznja].Status == 2) {
                                                table += '<td>Obradjena</td>';
                                            } else if (data[voznja].Status == 3) {
                                                table += '<td>Prihvacena</td>';
                                            } else if (data[voznja].Status == 4) {
                                                table += '<td>Otkazana</td>';
                                            } else if (data[voznja].Status == 5) {
                                                table += '<td>Neuspjesna</td>';
                                            } else if (data[voznja].Status == 6) {
                                                table += '<td>Uspjesna</td>';
                                            }

                                            table += `<td>${data[voznja].Iznos}</td>`;

                                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                            } else {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                            }
                                        }
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    for (pomocna in pom) {
                                        if ((data[voznja].Musterija == pom[pomocna].KorisnickoIme) && (pom[pomocna].Prezime == prezime)) {
                                            vs.push(data[voznja]);
                                            if (data[voznja].Automobil == 0) {
                                                table += '<tr><td>Putnički</td>';
                                            }
                                            else {
                                                table += '<tr><td>Kombi</td>';
                                            }
                                            table += `<td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                            if (data[voznja].Status == 0) {
                                                table += '<td>Kreirana</td>';
                                            } else if (data[voznja].Status == 1) {
                                                table += '<td>Formirana</td>';
                                            } else if (data[voznja].Status == 2) {
                                                table += '<td>Obradjena</td>';
                                            } else if (data[voznja].Status == 3) {
                                                table += '<td>Prihvacena</td>';
                                            } else if (data[voznja].Status == 4) {
                                                table += '<td>Otkazana</td>';
                                            } else if (data[voznja].Status == 5) {
                                                table += '<td>Neuspjesna</td>';
                                            } else if (data[voznja].Status == 6) {
                                                table += '<td>Uspjesna</td>';
                                            }

                                            table += `<td>${data[voznja].Iznos}</td>`;

                                            if ((data[voznja].Status == 0 && data[voznja].Vozac == "") || (data[voznja].Status == 0 && data[voznja].Vozac == null)) {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value=${data[voznja].IdVoznje}><b>Dodaj vozaca</b></button></td></tr>`;
                                            } else {
                                                table += `<td>${data[voznja].Vozac}</td><td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="dispecerDodajVozaca" type="button" value ="disable" disabled="disabled"><b>Dodaj vozaca</b></button></td></tr>`;
                                            }
                                        }
                                    }
                                }
                            }

                            table += "</table>";
                            kopijaDispecerSve = vs;
                            pretragaDispecerSve = true;
                            $('#PretraziDispecerSvediv').html(table);
                        }
                    }
                })
            })

            // Odavde pocinje pretraga vozaca

            $('#PretraziVozac').click(function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PretraziVozacdiv').show();
                $('#PretraziVozacKreiranediv').hide();
                $('#PrikaziVoznjeVozac').hide();
                

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";
                kopijaVozac = [];
                pretragaVozac = false;
                $('#PretraziVozacdiv').html(table);
            })

            let pretragaVozac = false;
            let kopijaVozac = [];

            $(document).on('click', '#pretragaVozacRefreshButton', function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PretraziVozacdiv').show();
                $('#PretraziVozacKreiranediv').hide();
                $('#PrikaziVoznjeVozac').hide();

                let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";
                kopijaVozac = [];
                pretragaVozac = false;
                $('#PretraziVozacdiv').html(table);
            })

            $(document).on('click', '#filtrirajVozacButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozac) {
                            data = kopijaVozac;
                        } else {
                            kopijaVozac = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";
                        let stanje = `${$('#filtriranjeSelectVozac').val()}`;

                        table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Vozac && data[voznja].Status == stanje) {
                                vs.push(data[voznja]);
                                table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }
                                if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                    table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                    table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                } else {
                                }//<td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>
                            }
                        }
                        table += "</table>";
                        kopijaVozac = vs;
                        pretragaVozac = true;
                        $('#PretraziVozacdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajOcjenaVozacButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozac) {
                            data = kopijaVozac;
                        } else {
                            kopijaVozac = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";

                        data.sort(function (a, b) {
                            return b.Komentar.OcenaVoznje - a.Komentar.OcenaVoznje;
                        })

                        table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Vozac) {
                                vs.push(data[voznja]);
                                table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }
                                if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                    table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                    table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                            }
                        }
                        table += "</table>";
                        kopijaVozac = vs;
                        pretragaVozac = true;
                        $('#PretraziVozacdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#sortirajDatumVozacButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozac) {
                            data = kopijaVozac;
                        } else {
                            kopijaVozac = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";

                        table += "<table border=\"1\">";

                        data.sort(function (a, b) {
                            return new Date(b.Komentar.DatumObjave) - new Date(a.Komentar.DatumObjave);
                        })

                        table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                        for (voznja in data) {
                            if (korisnik.KorisnickoIme == data[voznja].Vozac) {
                                vs.push(data[voznja]);
                                table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                if (data[voznja].Status == 0) {
                                    table += '<td>Kreirana</td>';
                                } else if (data[voznja].Status == 1) {
                                    table += '<td>Formirana</td>';
                                } else if (data[voznja].Status == 2) {
                                    table += '<td>Obradjena</td>';
                                } else if (data[voznja].Status == 3) {
                                    table += '<td>Prihvacena</td>';
                                } else if (data[voznja].Status == 4) {
                                    table += '<td>Otkazana</td>';
                                } else if (data[voznja].Status == 5) {
                                    table += '<td>Neuspjesna</td>';
                                } else if (data[voznja].Status == 6) {
                                    table += '<td>Uspjesna</td>';
                                }
                                if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                    table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                    table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                            }
                        }
                        table += "</table>";
                        kopijaVozac = vs;
                        pretragaVozac = true;
                        $('#PretraziVozacdiv').html(table);
                    }
                })
            })

            $(document).on('click', '#pretragaVozacOcjenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozac) {
                            data = kopijaVozac;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";

                        let OcjenaOd = `${$('#pretragaOdOcjenaVozac').val()}`;
                        let OcjenaDo = `${$('#pretragaDoOcjenaVozac').val()}`;

                        if (OcjenaOd == 0 && OcjenaDo == 0) {
                            alert("Unesite pravilno polja za pretragu!");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                            if (OcjenaDo == 0 && OcjenaOd != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Vozac == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            }
                            else if (OcjenaOd != 0 && OcjenaDo != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje >= OcjenaOd && data[voznja].Komentar.OcenaVoznje <= OcjenaDo && data[voznja].Vozac == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Komentar.OcenaVoznje <= OcjenaDo && data[voznja].Vozac == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaVozac = vs;
                            pretragaVozac = true;
                            $('#PretraziVozacdiv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaVozacCijenaButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozac) {
                            data = kopijaVozac;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";

                        let CijenaOd = `${$('#pretragaOdCijenaVozac').val()}`;
                        let CijenaDo = `${$('#pretragaDoOcjenaVozac').val()}`;

                        if (CijenaOd == 0 && CijenaDo == 0) {
                            alert("Unesite pravilno polja za pretragu!");
                        }
                        else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                            if (CijenaDo == 0 && CijenaOd != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Vozac == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            }
                            else if (CijenaOd != 0 && CijenaDo != 0) {
                                for (voznja in data) {
                                    if (data[voznja].Iznos >= CijenaOd && data[voznja].Iznos <= CijenaDo && data[voznja].Vozac == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    if (data[voznja].Iznos <= CijenaDo && data[voznja].Vozac == korisnik.KorisnickoIme && (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaVozac = vs;
                            pretragaVozac = true;
                            $('#PretraziVozacdiv').html(table);
                        }
                    }
                })
            })

            $(document).on('click', '#pretragaVozacDatumButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozac) {
                            data = kopijaVozac;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Filtriranje na osnovu statusa voznje:&nbsp; &nbsp; <select id=\"filtriranjeSelectVozac\" name=\"TipFiltriranje\"><option value=0>Kreirana</option><option value=1>Formirana</option><option value=2>Obradjena</option><option value=3>Prihvacena</option><option value=4>Otkazana</option><option value=5>Neuspesna</option><option value=6>Uspesna</option></select>&nbsp;&nbsp;<button id=\"filtrirajVozacButton\">Filtriraj</button></p><br /><p>Sortiranje po oceni: <button id=\"sortirajOcjenaVozacButton\">Sortiraj</button></p><br /><p>Sortiranje po datumu: <button id=\"sortirajDatumVozacButton\">Sortiraj</button></p>";

                        table += "<p>Pretraga po oceni (od, do, od-do) -> od: <select id=\"pretragaOdOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> do: <select id=\"pretragaDoOcjenaVozac\"><option id=0></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select> <button id=\"pretragaVozacOcjenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po ceni (od, do, od-do) -> od: <input type=\"number\" id=\"pretragaOdCijenaVozac\"/> do: <input type=\"number\" step=\"any\" id=\"pretragaDoCijenaVozac\"/> <button id=\"pretragaVozacCijenaButton\">Pretrazi</button></p>";

                        table += "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozac\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozac\"/> <button id=\"pretragaVozacDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacRefreshButton\">Osvezi</button><hr /> ";

                        let DatumOd = `${$('#pretragaOdDatumVozac').val()}`;
                        let DatumDo = `${$('#pretragaDoDatumVozac').val()}`;

                        if (DatumDo == "" && DatumOd == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                            if (DatumDo == "" && DatumOd != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && data[voznja].Vozac == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            }
                            else if (DatumOd != "" && DatumDo != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && new Date(date[0]) <= new Date(DatumDo) && data[voznja].Vozac == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) <= new Date(DatumDo) && data[voznja].Vozac == korisnik.KorisnickoIme) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                                        if (data[voznja].Status == 0) {
                                            table += '<td>Kreirana</td>';
                                        } else if (data[voznja].Status == 1) {
                                            table += '<td>Formirana</td>';
                                        } else if (data[voznja].Status == 2) {
                                            table += '<td>Obradjena</td>';
                                        } else if (data[voznja].Status == 3) {
                                            table += '<td>Prihvacena</td>';
                                        } else if (data[voznja].Status == 4) {
                                            table += '<td>Otkazana</td>';
                                        } else if (data[voznja].Status == 5) {
                                            table += '<td>Neuspjesna</td>';
                                        } else if (data[voznja].Status == 6) {
                                            table += '<td>Uspjesna</td>';
                                        }
                                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                                            table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                                        } /*else {
                                    table += `<td><button id=\"prihvatiVoznju\" type=\"button\" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>`;
                                }*/
                                    }
                                }
                            }
                            table += "</table>";
                            kopijaVozac = vs;
                            pretragaVozac = true;
                            $('#PretraziVozacdiv').html(table);
                        }
                    }
                })
            })

            // Vozac - kreirane 

            $('#PretraziVozacKreirane').click(function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').show();
                $('#PrikaziVoznjeVozac').hide();


                let table = "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozacKreirane\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozacKreirane\"/> <button id=\"pretragaVozacKreiraneDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaVozacKreiraneRefreshButton\">Osvezi</button><hr /> ";
                kopijaVozacKreirane = [];
                pretragaVozacKreirane = false;
                $('#PretraziVozacKreiranediv').html(table);
            })

            let pretragaVozacKreirane = false;
            let kopijaVozacKreirane = [];

            $(document).on('click', '#pretragaVozacKreiraneRefreshButton', function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacKreiranediv').show();
                $('#PrikaziVoznjeVozac').hide();

                let table = "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozacKreirane\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozacKreirane\"/> <button id=\"pretragaVozacKreiraneDatumButton\">Pretrazi</button></p>";

                table += "<button id=\"pretragaVozacKreiraneRefreshButton\">Osvezi</button><hr /> ";
                kopijaVozacKreirane = [];
                pretragaVozacKreirane = false;
                $('#PretraziVozacKreiranediv').html(table);
            })

            $(document).on('click', '#pretragaVozacKreiraneDatumButton', function () {
                let vs = [];

                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        if (pretragaVozacKreirane) {
                            data = kopijaVozacKreirane;
                        } else {
                            //kopija = [];
                        }

                        let table = "<p>Pretraga po datumu (od, do, od-do) -> od: <input type=\"date\" id=\"pretragaOdDatumVozacKreirane\"/> do: <input type=\"date\" id=\"pretragaDoDatumVozacKreirane\"/> <button id=\"pretragaVozacKreiraneDatumButton\">Pretrazi</button></p>";

                        table += "<button id=\"pretragaVozacKreiraneRefreshButton\">Osvezi</button><hr /> ";

                        let DatumOd = `${$('#pretragaOdDatumVozacKreirane').val()}`;
                        let DatumDo = `${$('#pretragaDoDatumVozacKreirane').val()}`;

                        if (DatumDo == "" && DatumOd == "") {
                            alert("Pravilno unesite vrednosti");
                        } else {
                            table += "<table border=\"1\">";
                            table += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th></tr>`;
                            if (DatumDo == "" && DatumOd != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && data[voznja].Status == 0 && (data[voznja].Automobil == korisnik.Automobil.Tip) && (data[voznja].Vozac != korisnik.KorisnickoIme)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Lokacija.Adresa.UlicaBroj}</td><td>${data[voznja].Lokacija.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Lokacija.Adresa.PozivniBroj}</td><td>Kreirana</td>`;
                                        table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td></tr>`;
                                    }
                                }
                            } else if (DatumOd != "" && DatumDo != "") {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) >= new Date(DatumOd) && new Date(date[0]) <= new Date(DatumDo) && data[voznja].Status == 0 && (data[voznja].Automobil == korisnik.Automobil.Tip) && (data[voznja].Vozac != korisnik.KorisnickoIme)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Lokacija.Adresa.UlicaBroj}</td><td>${data[voznja].Lokacija.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Lokacija.Adresa.PozivniBroj}</td><td>Kreirana</td>`;
                                        table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td></tr>`;
                                    }
                                }
                            } else {
                                for (voznja in data) {
                                    let date = data[voznja].VremePorudzbine.split('T');
                                    if (new Date(date[0]) <= new Date(DatumDo) && data[voznja].Status == 0 && (data[voznja].Automobil == korisnik.Automobil.Tip) && (data[voznja].Vozac != korisnik.KorisnickoIme)) {
                                        vs.push(data[voznja]);
                                        table += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Lokacija.Adresa.UlicaBroj}</td><td>${data[voznja].Lokacija.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Lokacija.Adresa.PozivniBroj}</td><td>Kreirana</td>`;
                                        table += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td></tr>`;
                                    }
                                }
                            }

                            table += "</table>";
                            kopijaVozacKreirane = vs;
                            pretragaVozacKreirane = true;
                            $('#PretraziVozacKreiranediv').html(table);
                        }
                    }
                })
            })

            $(document).on("click", "#banK", function () {
                let musterija = {
                    Banovan: 0,
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Korisnik/PutBanovanje/' + $(this).val(),
                    data: JSON.stringify(musterija),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesno banovan");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            });
            $(document).on("click", "#unbanK", function () {
                let musterija = {
                    Banovan: 1,
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Korisnik/PutBanovanje/' + $(this).val(),
                    data: JSON.stringify(musterija),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesno unbanovan");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            });

            $(document).on("click", "#banV", function () {
                let vozac = {
                    Banovan: 0,
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Vozac/PutBanovanje/' + $(this).val(),
                    data: JSON.stringify(vozac),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesno banovan");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            });
            $(document).on("click", "#unbanV", function () {
                let vozac = {
                    Banovan: 1,
                };
                $.ajax({
                    type: 'PUT',
                    url: '/api/Vozac/PutBanovanje/' + $(this).val(),
                    data: JSON.stringify(vozac),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesno skinut Ban");
                            $(location).attr('href', 'wellcome.html');
                        }
                    }
                })
            });

            $("#Banovanje").click(function () {
                $('#zaprofilDispecer').hide();
                $('#zaizmenuDispecer').hide();
                $('#PrikazDispecerSve').hide();
                $('#zadodajVozaca').hide();
                $('#zadodajVoznju').hide();
                $('#map1').hide();
                $('#PretraziDispecerdiv').hide();
                $('#PretraziDispecerSvediv').hide();
                $('#PrikazDispecer').hide();
                $("#block").show();
                //uzecu sve vozace i sve korisnike i staviti ih u tabelu i imacu dugme ban i unban
                let korisnici = [];
                let vozaci = [];
                $.ajax({
                    type: 'GET',
                    url: '/api/Korisnik',
                    async: false,
                    success: function (data) {
                        korisnici = data;
                    }
                })
                $.ajax({
                    type: 'GET',
                    url: '/api/Vozac',
                    async: false,
                    success: function (data) {
                        vozaci = data;
                    }
                })
                let tabelaKorisnika = `<h2 align=\"center\" style=\"color:#1abc9c\" >Banovanje</h2><hr /><table style=\"margin-left:440px;\" class="izmenaTejbl" border='1'><tr><th>Ime</th><th  width="200px">Prezime</th><th width="200px">Tip korisnika</th><th></th></tr>`;
                tabelaKorisnika += `<tr></tr>`;
                for (var kor in korisnici) {
                    tabelaKorisnika += `<tr><td>${korisnici[kor].Ime}</td><td>${korisnici[kor].Prezime}</td><td style="color:#a64dff;font-weight:bold">Musterija</td>`;
                    if (korisnici[kor].Banovan == 1) {
                        tabelaKorisnika += `<td><button id="banK" value=${korisnici[kor].Id}>Ban</button></td></tr>`;
                    } else {
                        tabelaKorisnika += `<td><button id="unbanK" value=${korisnici[kor].Id}>Unban</button></td></tr>`;
                    }
                }
                for (var voz in vozaci) {
                    tabelaKorisnika += `<tr><td>${vozaci[voz].Ime}</td><td>${vozaci[voz].Prezime}</td><td style="color:#29a329;font-weight:bold">Vozac</td>`;
                    if (vozaci[voz].Banovan == 1) {
                        tabelaKorisnika += `<td><button id="banV" class="dugmeSrc" value=${vozaci[voz].Id}>Ban</button></td></tr>`;
                    } else {
                        tabelaKorisnika += `<td><button id="unbanV" class="dugmeSrcReverse" value=${vozaci[voz].Id}>Unban</button></td></tr>`;
                    }
                }
                $("#block").html(tabelaKorisnika);

            });

            $('#SortirajSvojeVoznje').click(function () {
                $('#PrikaziKreiraneVoznjeVozac').hide();
                $('#zaprofilVozaca').hide();
                $('#zaizmenuVozaca').hide();
                $('#map1').hide();
                $('#UspjesnaVoznjaNoComm').hide();
                $('#KomentarNeuspjesnaVoznja').hide();
                $('#promenaLokacijeVozaca').hide();
                $('#PretraziVozacdiv').hide();
                $('#PretraziVozacSvediv').hide();
                $('#PrikaziVoznjeVozac').hide();
                $('#SortirajSvojeVoznjediv').show();

                let vozacevaLokacija;
                let pom;
                $.ajax({
                    type: 'GET',
                    url: '/api/Vozac/',
                    async: false,
                    success: function (data) {
                        pom = data;
                        for (vozac in data) {
                            if (data[vozac].Id == korisnik.Id) {
                                vozacevaLokacija = data[vozac].Lokacija;
                            }
                        }
                        
                    }
                })
                let voznjeVozaca;
                $.ajax({
                    type: 'GET',
                    url: '/api/Voznja',
                    async: false,
                    success: function (data) {
                        voznjeVozaca = [];
                        for (var voznja in data) {
                            for (pomocni in pom)
                                if (data[voznja].Vozac == pom[pomocni].KorisnickoIme && pom[pomocni].Id == korisnik.Id) {
                                voznjeVozaca.push(data[voznja]);//ovde su sve vozaceve voznje
                            }
                        }
                    }
                })
                let sortiraj = [];
                for (var voznja in voznjeVozaca) {
                    // c = √ ((xA − xB) ² + (yA − yB) ² )
                    let rastojanje;
                    rastojanje = Math.sqrt(Math.pow(vozacevaLokacija.X - voznjeVozaca[voznja].Lokacija.X, 2) + Math.pow(vozacevaLokacija.Y - voznjeVozaca[voznja].Lokacija.Y, 2));
                    let voznje1 = {
                        Id: voznjeVozaca[voznja].IdVoznje,//id voznje
                        Rastojanje: rastojanje,//od vozaca
                    }
                    sortiraj.push(voznje1);
                }
                sortiraj.sort(function (a, b) {
                    return a.Rastojanje - b.Rastojanje;
                })
                let temp = [];
                for (var voznja in sortiraj) {
                    for (var voznje in voznjeVozaca) {
                        if (sortiraj[voznja].Id == voznjeVozaca[voznje].IdVoznje)
                            temp.push(voznjeVozaca[voznje]);
                    }
                }
                data = temp;

                let tableOfProducts = "<table border='1'>";
                tableOfProducts += `<tr><th>Mušterija vožnje</th><th>Datum porudžbine</th><th>Ulica i br. dolaska</th><th>Mjesto dol.</th><th>Pozivni br. dol.</th><th>Status vož.</th><th>Opis kom.</th><th>Ocjena kom.</th><th>Dat. obj. kom. vož.</th><th> </th><th> </th></tr>`;
                for (voznja in data) {
                    if (localStorage.getItem("Ulogovan") == data[voznja].Vozac) {
                        tableOfProducts += `<tr><td>${data[voznja].Musterija}</td><td>${data[voznja].VremePorudzbine}</td><td>${data[voznja].Odrediste.Adresa.UlicaBroj}</td><td>${data[voznja].Odrediste.Adresa.NaseljenoMjesto}</td><td>${data[voznja].Odrediste.Adresa.PozivniBroj}</td>`;
                        if (data[voznja].Status == 0) {
                            tableOfProducts += '<td>Kreirana</td>';
                        } else if (data[voznja].Status == 1) {
                            tableOfProducts += '<td>Formirana</td>';
                        } else if (data[voznja].Status == 2) {
                            tableOfProducts += '<td>Obradjena</td>';
                        } else if (data[voznja].Status == 3) {
                            tableOfProducts += '<td>Prihvacena</td>';
                        } else if (data[voznja].Status == 4) {
                            tableOfProducts += '<td>Otkazana</td>';
                        } else if (data[voznja].Status == 5) {
                            tableOfProducts += '<td>Neuspjesna</td>';
                        } else if (data[voznja].Status == 6) {
                            tableOfProducts += '<td>Uspjesna</td>';
                        }
                        if (data[voznja].Status == 0 || data[voznja].Status == 1 || data[voznja].Status == 2) {
                            tableOfProducts += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value=${data[voznja].IdVoznje}><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value=${data[voznja].IdVoznje}><b>Neuspjesna voznja</b></button></td></tr>`;
                        } else if (data[voznja].Status == 4 || data[voznja].Status == 5 || data[voznja].Status == 6) {
                            tableOfProducts += `<td>${data[voznja].Komentar.Opis}</td><td>${data[voznja].Komentar.OcenaVoznje}</td><td>${data[voznja].Komentar.DatumObjave}</td><td><button id="uspjesnaVoznja" type="button" value ="disable" disabled="disabled"><b>Uspjesna voznja</b></button></td><td><button id="neuspjesnaVoznjaKomentar" type="button" value ="disable" disabled="disabled"><b>Neuspjesna voznja</b></button></td></tr>`;
                        } else {
                        }//<td><button id="prihvatiVoznju" type="button" value=${data[voznja].IdVoznje}><b>Prihvati voznju</b></button></td> //<td><button id="prihvatiVoznju" type="button" value ="disable" disabled="disabled"><b>Prihvati voznju</b></button></td>
                    }
                }
                tableOfProducts += "</table>";
                $("#SortirajSvojeVoznjediv").html(tableOfProducts);

            })

        });

    </script>
</head>
<body>
    <div id="musterija">
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#"><img style="max-width:100px; margin-top: -7px;" src="TaxiLogo.png"></a>
                </div>
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#" id="PrikazM">Musterija</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="dodajVoznjuKorisnik">Dodaj voznju</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="PretraziKorisnik">
                                <span class="glyphicon glyphicon-search"></span>
                        </a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown" style="float:right">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            Opcije
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#" id="profil">Profil</a></li>
                            <li><a href="#" id="izmeni">Izmeni</a></li>
                            <li><a href="#" id="odjavi">Odjavi</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <br />
        <br />
        <br />
        <div id="PrikazKorisnik"></div>
        <div id="PretraziKorisnikdiv"></div>
        <div id="divDodajVoznju">
            <h2 style="margin-right:auto">Kreiraj voznju:</h2>
            <hr />
            <table>
                <tr>
                    <td>Željeni tip automobila:</td>
                    <td>
                        <select name="Tip" class="form-control" id="TipVozila">
                            <option>PUTNICKI AUTOMOBIL</option>
                            <option>KOMBI VOZILO</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2" align="right"><input type="button" style="margin:5px;" name="DodajVoznju" id="DodajVoznju" value="Dodaj" /></td></tr>
            </table>
        </div>
        <div id="divIzmeniVoznju">
            <h2>Izmeni voznju:</h2>
            <hr />
            <table>
                <tr>
                    <td>Željeni tip automobila:</td>
                    <td>
                        <select name="Tip" class="form-control" id="TipVozilaIzmena">
                            <option>PUTNICKI AUTOMOBIL</option>
                            <option>KOMBI VOZILO</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2" align="right"><input type="button" style="margin:5px;" name="IzmeniVoznju" id="IzmeniVoznju" value="Izmeni" /></td></tr>
            </table>
        </div>
        <div id="divOtkaziVoznju">
            <h2>Komentar za voznju:</h2>
            <hr />
            <table>
                <tr><td colsapn="2"><hr /></td></tr>
                <tr><td>Opis:</td><td><input type="text" style="margin:5px;" name="Opis" id="OpisKorisnik" /></td></tr>
                <tr>
                    <td>Ocena voznje:</td>
                    <td>
                        <select name="OcenaVoznje" id="OcenaVoznjeKorisnik" class="form-control">
                            <option>0</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2" align="right"><input type="button" style="margin:5px;" name="OtkaziVoznju" id="OtkaziKorisnik" value="Otkazi" /></td></tr>
            </table>
        </div>
        <div id="divKomentarisiVoznju">
            <h2>Komentar za voznju:</h2>
            <hr />
            <table>
                <tr><td colsapn="2"><hr /></td></tr>
                <tr><td>Opis:</td><td><input type="text" style="margin:5px;" name="Opis" id="OpisKorisnikKomentar" /></td></tr>
                <tr>
                    <td>Ocena voznje:</td>
                    <td>
                        <select name="OcenaVoznjeKomentar" id="OcenaVoznjeKorisnikKomentar" class="form-control">
                            <option>0</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2" align="right"><input type="button" style="margin:5px;" name="KomentarisiVoznju" id="KomentarisiKorisnik" value="Komentarisi" /></td></tr>
            </table>
        </div>
        <div id="zaprofil">
            <h2>Korisnicki profil</h2>
            <hr />
            <table>
                <tr><th>Korisnicko ime:</th><td id="1"></td></tr>
                <tr><th>Lozinka:</th><td id="2"></td></tr>
                <tr><th>Ime:</th><td id="3"></td></tr>
                <tr><th>Prezime:</th><td id="4"></td></tr>
                <tr><th>JMBG:</th><td id="5"></td></tr>
                <tr><th>Pol:</th><td id="6"></td></tr>
                <tr><th>Kontakt Telefon:</th><td id="7"></td></tr>
                <tr><th>Email:</th><td id="8"></td></tr>
            </table>
        </div>
        <div id="zaizmenu">
        </div>
    </div>
    <div id="dispecer">
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#"><img style="max-width:100px; margin-top: -7px;" src="TaxiLogo.png"></a>
                </div>
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#" id="PrikazD">Dispecer</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#" id="PretraziDispecer">
                            <span class="glyphicon glyphicon-search"></span>
                        </a>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="DispecerSveVoznje">Dispecer - sve voznje</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#" id="PretraziDispecerSve">
                            <span class="glyphicon glyphicon-search"></span>
                        </a>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            Dodaj
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#" id="dodajVozaca">Vozaca</a></li>
                            <li><a href="#" id="dodajVoznju">Voznju</a></li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="Banovanje">Banovanje</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown" style="float:right">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            Opcije
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#" id="profilDispecer">Profil</a></li>
                            <li><a href="#" id="izmeniDispecer">Izmeni</a></li>
                            <li><a href="#" id="odjaviDispecer">Odjavi</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <br />
        <br />
        <br />
        <div id="PrikazDispecer">
            <h2>Prikaz voznji:</h2>
        </div>
        <div id="block"></div>
        <div id="PretraziDispecerdiv"></div>
        <div id="PrikazDispecerSve"></div>
        <div id="PretraziDispecerSvediv"></div>
        <div id="zadodajVozaca">
            <h2>Dodavanje vozaca</h2>
            <hr />
            <table>
                <tr><th>Korisnicko ime:</th><td><input type="text" name="KorisnickoIme" id="KorisnickoImeVozaca" style="margin:5px" /></td></tr>
                <tr><th>Lozinka:</th><td><input type="password" name="Lozinka" id="LozinkaVozaca" style="margin:5px" /></td></tr>
                <tr><th>Ime:</th><td><input type="text" name="Ime" id="ImeVozaca" style="margin:5px" /></td></tr>
                <tr><th>Prezime:</th><td><input type="text" name="Prezime" id="PrezimeVozaca" style="margin:5px" /></td></tr>
                <tr><th>JMBG:</th><td><input type="text" name="JMBG" id="JMBGVozaca" style="margin:5px" /></td></tr>
                <tr>
                    <th>Pol:</th>
                    <td>
                        <select name="Pol" class="form-control" id="PolVozaca">
                            <option>MUSKI</option>
                            <option>ZENSKI</option>
                        </select>
                    </td>
                </tr>
                <tr><th>Kontakt Telefon:</th><td><input type="text" name="Telefon" id="TelefonVozaca" style="margin:5px" /></td></tr>
                <tr><th>Email:</th><td><input type="email" name="Email" id="EmailVozaca" style="margin:5px" /></td></tr>
                <tr><th>Godiste automobila:</th><td><input type="text" name="GodisteAutomobila" id="GodisteAutomobila" style="margin:5px" /></td></tr>
                <tr><th>Broj registarske oznake:</th><td><input type="text" name="BrojRegistarskeOznake" id="BrojRegistarskeOznake" style="margin:5px" /></td></tr>
                <tr><th>Broj taksi vozila:</th><td><input type="text" name="BrojTaksiVozila" id="BrojTaksiVozila" style="margin:5px" /></td></tr>
                <tr>
                    <th>Tip automobila:</th>
                    <td>
                        <select name="Tip" class="form-control" id="tip">
                            <option>PUTNICKI AUTOMOBIL</option>
                            <option>KOMBI VOZILO</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2"><hr /></td></tr>
                <tr><td colspan="2" align="right"><b><input type="button" value="Dodaj" id="DodajVozaca" /></b></td></tr>
            </table>
        </div>
        <div id="zadodajVoznju">
            <h2>Kreiraj voznju:</h2>
            <hr />
            <table>
                <tr>
                    <td>Željeni tip automobila:</td>
                    <td>
                        <select name="Tip" class="form-control" id="dispecerTipVozila">
                            <option>PUTNICKI AUTOMOBIL</option>
                            <option>KOMBI VOZILO</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2" align="right"><input type="button" style="margin:5px;" name="DodajVoznju" id="dispecerDodajVoznju" value="Dodaj" /></td></tr>
            </table>
        </div>
        <div id="zaprofilDispecer">
            <h2>Dispecerski profil</h2>
            <hr />
            <table>
                <tr><th>Korisnicko ime:</th><td id="1D"></td></tr>
                <tr><th>Lozinka:</th><td id="2D"></td></tr>
                <tr><th>Ime:</th><td id="3D"></td></tr>
                <tr><th>Prezime:</th><td id="4D"></td></tr>
                <tr><th>JMBG:</th><td id="5D"></td></tr>
                <tr><th>Pol:</th><td id="6D"></td></tr>
                <tr><th>Kontakt Telefon:</th><td id="7D"></td></tr>
                <tr><th>Email:</th><td id="8D"></td></tr>
            </table>
        </div>
        <div id="zaizmenuDispecer">
            <table>
                <tr><th>Korisnicko ime:</th><td><input type="text" name="KorisnickoIme" id="KorisnickoImeD" style="margin:5px" /></td></tr>
                <tr><th>Lozinka:</th><td><input type="password" name="Lozinka" id="LozinkaD" style="margin:5px" /></td></tr>
                <tr><th>Ime:</th><td><input type="text" name="Ime" id="ImeD" style="margin:5px" /></td></tr>
                <tr><th>Prezime:</th><td><input type="text" name="Prezime" id="PrezimeD" style="margin:5px" /></td></tr>
                <tr><th>JMBG:</th><td><input type="text" name="JMBG" id="JMBGD" style="margin:5px" /></td></tr>
                <tr><th>Kontakt Telefon:</th><td><input type="text" name="Telefon" id="TelefonD" style="margin:5px" /></td></tr>
                <tr><th>Email:</th><td><input type="email" name="Email" id="EmailD" style="margin:5px" /></td></tr>
                <tr><td colspan="2"><hr /></td></tr>
                <tr><td colspan="2" align="right"><b><input type="button" value="Izmeni" id="IzmeniDispecer" /></b></td></tr>
            </table>
        </div>
    </div>
    <div id="vozac">
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#"><img style="max-width:100px; margin-top: -7px;" src="TaxiLogo.png"></a>
                </div>
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#" id="PrikazV">Vozac</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#" id="PretraziVozac">
                            <span class="glyphicon glyphicon-search"></span>
                        </a>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="VozacKreirane">Vozac - kreirane voznje</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#" id="PretraziVozacKreirane">
                            <span class="glyphicon glyphicon-search"></span>
                        </a>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="PromenaLok">Promena lokacije</a></li>
                </ul>
                <ul class="nav navbar-nav">
                    <li><a href="#" id="SortirajSvojeVoznje">Sortiraj svoje voznje</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown" style="float:right">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            Opcije
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#" id="profilVozaca">Profil</a></li>
                            <li><a href="#" id="izmeniVozaca">Izmeni</a></li>
                            <li><a href="#" id="odjaviVozaca">Odjavi</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <br />
        <br />
        <br />
        <div id="PrikaziVoznjeVozac">
            <h2>Voznje:</h2>
        </div>
        <div id="PretraziVozacdiv">
        </div>
        <div id="SortirajSvojeVoznjediv"></div>
        <div id="PretraziVozacKreiranediv">
        </div>
        <div id="PrikaziKreiraneVoznjeVozac">
        </div>
        <div id="zaprofilVozaca">
            <h2>Vozac profil</h2>
            <hr />
            <table>
                <tr><th>Korisnicko ime:</th><td id="1v"></td></tr>
                <tr><th>Lozinka:</th><td id="2v"></td></tr>
                <tr><th>Ime:</th><td id="3v"></td></tr>
                <tr><th>Prezime:</th><td id="4v"></td></tr>
                <tr><th>JMBG:</th><td id="5v"></td></tr>
                <tr><th>Pol:</th><td id="6v"></td></tr>
                <tr><th>Kontakt Telefon:</th><td id="7v"></td></tr>
                <tr><th>Email:</th><td id="8v"></td></tr>
                <tr><th>X:</th><td id="9v"></td></tr>
                <tr><th>Y:</th><td id="10v"></td></tr>
                <tr><th>Ulica i broj:</th><td id="11v"></td></tr>
                <tr><th>Naseljeno mjesto:</th><td id="12v"></td></tr>
                <tr><th>Pozivni broj:</th><td id="13v"></td></tr>
                <tr><th>Godiste automobila:</th><td id="14v"></td></tr>
                <tr><th>Broj registarske oznake:</th><td id="15v"></td></tr>
                <tr><th>Broj taksi vozila:</th><td id="16v"></td></tr>
                <tr><th>Tip automobila:</th><td id="17v"></td></tr>
            </table>
        </div>
        <div id="zaizmenuVozaca">
            <table>
                <tr><th>Korisnicko ime:</th><td><input type="text" name="KorisnickoIme" id="KorisnickoImeV" style="margin:5px" /></td></tr>
                <tr><th>Lozinka:</th><td><input type="password" name="Lozinka" id="LozinkaV" style="margin:5px" /></td></tr>
                <tr><th>Ime:</th><td><input type="text" name="Ime" id="ImeV" style="margin:5px" /></td></tr>
                <tr><th>Prezime:</th><td><input type="text" name="Prezime" id="PrezimeV" style="margin:5px" /></td></tr>
                <tr><th>JMBG:</th><td><input type="text" name="JMBG" id="JMBGV" style="margin:5px" /></td></tr>
                <tr>
                    <th>Pol:</th>
                    <td>
                        <select name="Pol" class="form-control" id="PolV">
                            <option>MUSKO</option>
                            <option>ZENSKO</option>
                        </select>
                    </td>
                </tr>
                <tr><th>Kontakt Telefon:</th><td><input type="text" name="Telefon" id="TelefonV" style="margin:5px" /></td></tr>
                <tr><th>Email:</th><td><input type="email" name="Email" id="EmailV" style="margin:5px" /></td></tr>
                <tr><th>Godiste automobila:</th><td><input type="text" name="GodisteAutomobila" id="GodisteAutomobilaV" style="margin:5px" /></td></tr>
                <tr><th>Broj registarske oznake:</th><td><input type="text" name="BrojRegistarskeOznake" id="BrojRegistarskeOznakeV" style="margin:5px" /></td></tr>
                <tr><th>Broj taksi vozila:</th><td><input type="text" name="BrojTaksiVozila" id="BrojTaksiVozilaV" style="margin:5px" /></td></tr>
                <tr>
                    <th>Tip automobila:</th>
                    <td>
                        <select name="Tip" class="form-control" id="TipV">
                            <option>PUTNICKI AUTOMOBIL</option>
                            <option>KOMBI VOZILO</option>
                        </select>
                    </td>
                </tr>
                <tr><td colspan="2"><hr /></td></tr>
                <tr><td colspan="2" align="right"><b><input type="button" value="Izmeni" id="IzmeniVozaca" /></b></td></tr>
            </table>
        </div>
        <div id="UspjesnaVoznjaNoComm">
            <div id="IzmjenaShow10"></div>
        </div>
        <div id="KomentarNeuspjesnaVoznja">
            <div id="IzmjenaShow7"></div>
        </div>
        <div id="promenaLokacijeVozaca">
            <table>
                <tr><td colspan="2" align="right"><b><input type="button" value="Izmeni" id="promenaLokacijeVozacaDugme" /></b></td></tr>
            </table>
        </div>
    </div>

    <div id="map1">
        <br /><h3>Odaberi lokaciju:</h3>
        <div id="map" class="map" style="width:500px;height:500px; "></div>
    </div>

    <script>
        function myMap() {
            var mapCanvas = document.getElementById("map");
            var myCenter = new google.maps.LatLng(45.242630873254775, 19.842914435055945);
            var mapOptions = { center: myCenter, zoom: 18 };
            var map = new google.maps.Map(mapCanvas, mapOptions);
            google.maps.event.addListener(map, 'click', function (event) {
                placeMarker(map, event.latLng);
            });
        }
        let fulAdresa = '';
        function placeMarker(map, location) {
            var marker = new google.maps.Marker({
                position: location,
                map: map
            });
            var fullAdresa = displayLocation(location.lat(), location.lng());
            var delovi = fullAdresa.split(",");
            var ulicaIbroj = delovi[0];
            var grad = delovi[1];//sa zipom
            var drzava = delovi[2];
            fulAdresa = location.lat() + "," + location.lng() + "," + ulicaIbroj + "," + grad + "," + drzava;
            var infowindow = new google.maps.InfoWindow({
                content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng() + '<br>Ulica i broj: ' + ulicaIbroj + '<br>Grad: ' + grad + '<br>Drzava: ' + drzava + '<br>=' + displayLocation(location.lat(), location.lng())
            });
            infowindow.open(map, marker);
        }
        function displayLocation(latitude, longitude) {
            var request = new XMLHttpRequest();
            var method = 'GET';
            var url = 'http://maps.googleapis.com/maps/api/geocode/json?latlng='
                + latitude + ',' + longitude + '&sensor=true';
            var async = false;
            var address;
            request.open(method, url, async);
            request.onreadystatechange = function () {
                if (request.readyState == 4 && request.status == 200) {
                    var data = JSON.parse(request.responseText);
                    address = data.results[0];
                    var value = address.formatted_address.split(",");
                    count = value.length;
                    country = value[count - 1];
                    state = value[count - 2];
                    city = value[count - 3];
                }
            };
            request.send();
            return address.formatted_address;
        };
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBrjeABCsOwW1rhi7eW6_b_fWF8OK2HeiA&callback=myMap"></script>

</body>
</html>
